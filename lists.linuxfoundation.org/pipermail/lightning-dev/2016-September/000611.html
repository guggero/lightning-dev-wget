<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Payment presentation strawmen.
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-September/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Payment%20presentation%20strawmen.&In-Reply-To=%3C20160910213612.GA15435%40nex%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000610.html">
   <LINK REL="Next"  HREF="000612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Payment presentation strawmen.</H1>
    <B>Christian Decker</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Payment%20presentation%20strawmen.&In-Reply-To=%3C20160910213612.GA15435%40nex%3E"
       TITLE="[Lightning-dev] Payment presentation strawmen.">decker.christian at gmail.com
       </A><BR>
    <I>Sat Sep 10 21:36:12 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="000610.html">[Lightning-dev] Payment presentation strawmen.
</A></li>
        <LI>Next message: <A HREF="000612.html">[Lightning-dev] Payment presentation strawmen.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#611">[ date ]</a>
              <a href="thread.html#611">[ thread ]</a>
              <a href="subject.html#611">[ subject ]</a>
              <a href="author.html#611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Sep 10, 2016 at 06:16:07AM -0500, Ryan Grant wrote:
&gt;<i> Payments unexpectedly fragmented into multiple LN channels are
</I>&gt;<i> trickier than transactions spending multiple UTXOs.  If Alice pays Bob
</I>&gt;<i> using multiple channels to fund one payment, then Bob's accounting
</I>&gt;<i> procedures might need time-based heuristics to join separate LN
</I>&gt;<i> transactions.
</I>&gt;<i> 
</I>&gt;<i> Wherever payments might fragment, some reassembly protocol support,
</I>&gt;<i> like BIP 70's merchant_data field, should be available.  Every wallet
</I>&gt;<i> should be assisting with this accounting.
</I>&gt;<i>
</I>
At least for the implementation using the r-hash to condition the
release of funds there is nothing special about splitting a
payment. As long as the recipient knows the total amount it should be
receiving it can delay the release of the secret until it is
guaranteed all funds. Collating the partial payments is done with the
r-hash. I'm pretty sure that the private key release would also work
the same way.

A timeout might be sensible though just to be able to safely retry
should a partial payment get stuck.

In theory Lightning would also support arbitrary splitting and merging
along the paths of the payment. Not sure if this is still possible (or
desirable) when adding Onion Routing to the mix though :-)

Cheers,
Christian
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000610.html">[Lightning-dev] Payment presentation strawmen.
</A></li>
	<LI>Next message: <A HREF="000612.html">[Lightning-dev] Payment presentation strawmen.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#611">[ date ]</a>
              <a href="thread.html#611">[ thread ]</a>
              <a href="subject.html#611">[ subject ]</a>
              <a href="author.html#611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
