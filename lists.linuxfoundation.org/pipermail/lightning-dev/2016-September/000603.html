<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] [BOLT Draft] Onion Routing Spec
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-September/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20%5BBOLT%20Draft%5D%20Onion%20Routing%20Spec&In-Reply-To=%3CCAO3Pvs_%2By%3Dq7ZUDes7jhBXqt49VQaJSGyhsVTtSOdLDQp4C3Dw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000622.html">
   <LINK REL="Next"  HREF="000606.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] [BOLT Draft] Onion Routing Spec</H1>
    <B>Olaoluwa Osuntokun</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20%5BBOLT%20Draft%5D%20Onion%20Routing%20Spec&In-Reply-To=%3CCAO3Pvs_%2By%3Dq7ZUDes7jhBXqt49VQaJSGyhsVTtSOdLDQp4C3Dw%40mail.gmail.com%3E"
       TITLE="[Lightning-dev] [BOLT Draft] Onion Routing Spec">laolu32 at gmail.com
       </A><BR>
    <I>Mon Sep  5 19:24:11 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="000622.html">[Lightning-dev] [BOLT Draft] Onion Routing Spec
</A></li>
        <LI>Next message: <A HREF="000606.html">[Lightning-dev] Payment presentation strawmen.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#603">[ date ]</a>
              <a href="thread.html#603">[ thread ]</a>
              <a href="subject.html#603">[ subject ]</a>
              <a href="author.html#603">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Sep 2, 2016 at 5:08 AM Christian Decker &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">decker.christian at gmail.com</A>&gt;
wrote:

&gt;<i> As far as I can see we mostly agree on the spec, with some issues that
</I>&gt;<i> should be deferred until later/to other specs:
</I>&gt;<i>
</I>&gt;<i>  - Key-rotation policies
</I>&gt;<i>  - Backlog of seen shared secrets
</I>&gt;<i>  - Payload formatting (what data to include and how it is encoded)
</I>&gt;<i>
</I>&gt;<i> Sounds good to me. That's a good summarization of the current outstanding
</I>aspects to be deferred based on our past discussions.


&gt;<i> Anyway, I'm happy to shelve this aspect for a future v2 of the onion
</I>&gt;<i> routing protocol, and include the payload in the HMAC.
</I>&gt;<i>
</I>
Agreed, the full specification of the rendezvous handshake can deferred to
a later v2. We may even learn of some limitations or issues with the
current format which may impact the requirements or traits we want from a
future rendezvous protocol.

I think for now we should also keep the payload sizes fixed at 20
&gt;<i> bytes for per-hop and 1024 byte for end-to-end payload
</I>

Sure, although I have some reservations about the 1024-byte e2e payload due
to the potential bandwidth overhead for each HTLC-add in a high frequency
setting. However we should gather metrics from live testing environments to
see if this is actually a concern in practice.

Since we seem to want to add and remove bits and pieces it might be worth
&gt;<i> to make it flexible using a generic encoding (JSON, msgpack, ...).
</I>&gt;<i> This potentially includes the &quot;forward X units of coin Y&quot; and the &quot;expect X
</I>&gt;<i> units&quot; for the endpoint. We can also address the &quot;last-hop corrupts&quot;
</I>&gt;<i> problem in the payload with an additional end-to-end secret like you
</I>&gt;<i> suggested. Having them in the per-hop payload and HMACing the
</I>&gt;<i> payloads secures them against tampering.
</I>&gt;<i>
</I>
It feels like targeting a generic encoding might be at odds with the space
constraints imposed by the size of the per-hop payload. However if we can
find a format that's both succinct yet generic, then that would be very
attractive.


&gt;<i> BTW do we have a process in place for upgrading spec drafts
</I>&gt;<i> or do we keep things informal?
</I>&gt;<i>
</I>
Hmm, I'm not sure. As far as I'm aware, none of the current specifications
have been elevated to anything above a &quot;draft&quot; state. Perhaps we can hammer
out the ins-and-outs of what we'd all like to see in the process in Milan?

Yay! This is exciting :), I'm happy with the way the current specification
has turned out. I think your break down of the current outstanding issues
to be deferred to later specs are accurate. I also welcome a PR to our
&quot;lightning-onion&quot; repo integrating the changes you implemented in your fork
of my original code.

-- Laolu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20160905/d2e5fe4c/attachment.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20160905/d2e5fe4c/attachment.html</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000622.html">[Lightning-dev] [BOLT Draft] Onion Routing Spec
</A></li>
	<LI>Next message: <A HREF="000606.html">[Lightning-dev] Payment presentation strawmen.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#603">[ date ]</a>
              <a href="thread.html#603">[ thread ]</a>
              <a href="subject.html#603">[ subject ]</a>
              <a href="author.html#603">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
