<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] RouteBoost: Adding 'r=' fields to BOLT 11 invoices to flag capacity
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-October/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20RouteBoost%3A%20Adding%20%27r%3D%27%20fields%20to%20BOLT%2011%20invoices%0A%20to%20flag%20capacity&In-Reply-To=%3C504b31cc-fcb9-f433-32e9-00de9456461b%40mattcorallo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001451.html">
   <LINK REL="Next"  HREF="001429.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] RouteBoost: Adding 'r=' fields to BOLT 11 invoices to flag capacity</H1>
    <B>Matt Corallo</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20RouteBoost%3A%20Adding%20%27r%3D%27%20fields%20to%20BOLT%2011%20invoices%0A%20to%20flag%20capacity&In-Reply-To=%3C504b31cc-fcb9-f433-32e9-00de9456461b%40mattcorallo.com%3E"
       TITLE="[Lightning-dev] RouteBoost: Adding 'r=' fields to BOLT 11 invoices to flag capacity">lf-lists at mattcorallo.com
       </A><BR>
    <I>Mon Oct  8 04:38:59 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="001451.html">[Lightning-dev] Proposal for syncing channel updates
</A></li>
        <LI>Next message: <A HREF="001429.html">[Lightning-dev] RouteBoost: Adding 'r=' fields to BOLT 11	invoices to flag capacity
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1428">[ date ]</a>
              <a href="thread.html#1428">[ thread ]</a>
              <a href="subject.html#1428">[ subject ]</a>
              <a href="author.html#1428">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Resending due to ML bugs....

On a related note, it would be nice to get some clarity on appropriate
usage of the r= field here.
The way I had implemented it initially was that if an invoice had an r=
field any publicly-discovered last-hop routes would be ignored as the r=
data is most likely more up-to-date than any public route rumor information.
However, if it's only used as a hint and only one or two out of
potentially many channels are included in it, that may make little sense.

Not really sure what the appropriate guidance should be, probably
something like SHOULD prefer to use invoice-r=-provided-hints over
publicly-discovered routes however MAY use other last-hops in case a
substantially better route is known?

Matt

On 09/19/18 22:10, Rusty Russell wrote:
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i>         I'm considering a change to c-lightning, where `invoice` would
</I>&gt;<i> automatically append an 'r' field for a channel which has sufficient
</I>&gt;<i> *incoming* capacity for the amount (using a weighted probability across
</I>&gt;<i> our peers).
</I>&gt;<i> 
</I>&gt;<i>          This isn't quite what 'r' was for, but it would be a useful
</I>&gt;<i> hint for payment routing and also potentially for establishing an
</I>&gt;<i> initial channel.  This is an issue for the Blockstream Store which
</I>&gt;<i> deliberately doesn't advertize an address any more to avoid
</I>&gt;<i> centralization.
</I>&gt;<i> 
</I>&gt;<i> Thoughts welcome!
</I>&gt;<i> Rusty.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Lightning-dev mailing list
</I>&gt;<i> <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">Lightning-dev at lists.linuxfoundation.org</A>
</I>&gt;<i> <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev</A>
</I>&gt;<i> 
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001451.html">[Lightning-dev] Proposal for syncing channel updates
</A></li>
	<LI>Next message: <A HREF="001429.html">[Lightning-dev] RouteBoost: Adding 'r=' fields to BOLT 11	invoices to flag capacity
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1428">[ date ]</a>
              <a href="thread.html#1428">[ thread ]</a>
              <a href="subject.html#1428">[ subject ]</a>
              <a href="author.html#1428">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
