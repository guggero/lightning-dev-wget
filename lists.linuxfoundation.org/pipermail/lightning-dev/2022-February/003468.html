<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Lightning and other layer 2 projects with	multiple RBF policies
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2022-February/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Lightning%20and%20other%20layer%202%20projects%20with%0A%09multiple%20RBF%20policies&In-Reply-To=%3CbVli6fbpw1DaoPi7BqJrwWoAaseanAgWiNFQ7zyL3uOkxk2d1Kv4OCEOXzZxK5ir-p4qyvyFsd4BebPEvrYCP_2jyJ147EtyTWIVpH13dKE%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003466.html">
   <LINK REL="Next"  HREF="003469.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Lightning and other layer 2 projects with	multiple RBF policies</H1>
    <B>Michael Folkson</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Lightning%20and%20other%20layer%202%20projects%20with%0A%09multiple%20RBF%20policies&In-Reply-To=%3CbVli6fbpw1DaoPi7BqJrwWoAaseanAgWiNFQ7zyL3uOkxk2d1Kv4OCEOXzZxK5ir-p4qyvyFsd4BebPEvrYCP_2jyJ147EtyTWIVpH13dKE%3D%40protonmail.com%3E"
       TITLE="[Lightning-dev] Lightning and other layer 2 projects with	multiple RBF policies">michaelfolkson at protonmail.com
       </A><BR>
    <I>Mon Feb 14 17:02:06 UTC 2022</I>
    <P><UL>
        <LI>Previous message: <A HREF="003466.html">[Lightning-dev] Lightning and other layer 2 projects with multiple RBF policies
</A></li>
        <LI>Next message: <A HREF="003469.html">[Lightning-dev] Lightning and other layer 2 projects with multiple RBF policies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3468">[ date ]</a>
              <a href="thread.html#3468">[ thread ]</a>
              <a href="subject.html#3468">[ subject ]</a>
              <a href="author.html#3468">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> This is the assumption which I don't agree with and hence asked some questions in my email. A new RBF policy used by default in Core will not improve the security of projects that are vulnerable to multiple RBF policies or rely on these policies in a way that affects their security.
</I>
Right, not immediately. If and when new policy rules are included in a Bitcoin Core release it would take a while before a significant majority of the network were running those new policy rules (barring some kind of urgency, an attacker exploiting a systemic security flaw etc). That's not an argument not to do it though if you take a longer term perspective on building the strongest possible foundation for Lightning or other Layer 2 projects. The security benefit would just be delayed until a significant majority of Bitcoin Core users upgraded to a version including those new policy rules.

&gt;<i> Bitcoin Core with different versions are used at any point and not sure if this will ever change.
</I>
Sure there will always be some stray full nodes running extremely old versions but the general direction of travel is more and more full nodes upgrading to newer versions. A network where *all* full nodes are running the same policy rules is clearly not an option available to us without making policy rules effective consensus rules and forking/kicking those old versions off the network.

&gt;<i> Maybe some experiments on signet might help in knowing more issues associated with multiple RBF policies.
</I>
Definitely agree. It is a really interesting research area and lots of opportunities for simulations and experiments on the default or custom signet networks. Especially if we fill blocks with auto-generated transactions and/or reduce block sizes and create an artificial fee market.

--
Michael Folkson
Email: michaelfolkson at [protonmail.com](<A HREF="http://protonmail.com/">http://protonmail.com/</A>)
Keybase: michaelfolkson
PGP: 43ED C999 9F85 1D40 EAF4 9835 92D6 0159 214C FEE3

------- Original Message -------
On Monday, February 14th, 2022 at 5:18 AM, Prayank &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">prayank at tutanota.de</A>&gt; wrote:

&gt;&gt;<i> I suspect as with defaults generally most users will run whatever the defaults are as they won't care to change them (or even be capable of changing them if they are very non-technical).
</I>&gt;<i>
</I>&gt;<i> 30% nodes are using 0.21.1 right now whereas latest version was 22.0 and some are even running lower versions. Different versions in future with defaults might be running RBF v1 and RBF v2.
</I>&gt;<i>
</I>&gt;&gt;<i> But users who have a stake in the security of Lightning (or other Layer 2 projects) will clearly want to run whatever policy rules are beneficial to those protocols.
</I>&gt;<i>
</I>&gt;<i> Agree and attackers will want to run the nodes with policy that helps them exploit bitcoin projects. Miners can run nodes with policy that helps them get more fees.
</I>&gt;<i>
</I>&gt;&gt;<i> As you know the vast majority of the full nodes on the network currently run Bitcoin Core. Whether that will change in future and whether this a good thing or not is a whole other discussion. But the reality is that with such strong dominance there is the option to set defaults that are widely used.
</I>&gt;<i>
</I>&gt;<i> Bitcoin Core with different versions are used at any point and not sure if this will ever change.
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://luke.dashjr.org/programs/bitcoin/files/charts/security.html">https://luke.dashjr.org/programs/bitcoin/files/charts/security.html</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://www.shodan.io/search/facet.png?query=User-Agent%3A%2FSatoshi%2F+port%3A%228333%22&amp;facet=product">https://www.shodan.io/search/facet.png?query=User-Agent%3A%2FSatoshi%2F+port%3A%228333%22&amp;facet=product</A>
</I>&gt;<i>
</I>&gt;&gt;<i> I think if certain defaults can bolster the security of Lightning (and possibly other Layer 2 projects) at no cost to full node users with no interest in those protocols we should discuss what those defaults should be.
</I>&gt;<i>
</I>&gt;<i> This is the assumption which I don't agree with and hence asked some questions in my email. A new RBF policy used by default in Core will not improve the security of projects that are vulnerable to multiple RBF policies or rely on these policies in a way that affects their security.
</I>&gt;<i>
</I>&gt;<i> Maybe some experiments on signet might help in knowing more issues associated with multiple RBF policies.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Prayank
</I>&gt;<i>
</I>&gt;<i> A3B1 E430 2298 178F
</I>&gt;<i>
</I>&gt;<i> Feb 13, 2022, 21:16 by <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">michaelfolkson at protonmail.com</A>:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Prayank
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 1.Is Lightning Network and a few other layer 2 projects vulnerable to multiple RBF policies being used?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Clearly the security of the Lightning Network and some other Layer 2 projects are at least impacted or partly dependent on policy rules in a way that the base blockchain/network isn't. As I (and others) have said on many occasions ideally this wouldn't be the case but it is best we can do with current designs. I (and others) take the view that this is not a reason to abandon those designs in the absence of an alternative that offers a strictly superior security model. Going back to a model where *all* activity is onchain (or even in less trust minimized protocols than Lightning) doesn't seem like the right approach to me.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 2.With recent discussion to change things in default RBF policy used by Core, will we have multiple versions using different policies? Are users and especially miners incentivized to use different versions and policies? Do they have freedom to use different RBF policy?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Without making policy rules effective consensus rules users (including miners) are free to run different policy rules. I think it is too early to say what the final incentives will be to run the same or differing policies. Research into Lightning security is still nascent and we have no idea whether alternative Layer 2 projects will thrive and whether they will have the same or conflicting security considerations to Lightning.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As you know the vast majority of the full nodes on the network currently run Bitcoin Core. Whether that will change in future and whether this a good thing or not is a whole other discussion. But the reality is that with such strong dominance there is the option to set defaults that are widely used. I think if certain defaults can bolster the security of Lightning (and possibly other Layer 2 projects) at no cost to full node users with no interest in those protocols we should discuss what those defaults should be.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 3.Are the recent improvements suggested for RBF policy only focused on Lightning Network and its security which will anyway remain same or become worse with multiple RBF policies?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think by nature of the Lightning Network being the most widely adopted Layer 2 project most of the focus has been on Lightning security. But contributors to other Layer 2 projects are free to flag and discuss security considerations that aren't Lightning specific.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Note: Bitcoin Knots policy is fully configurable, even in the GUI - users can readily choose whatever policy *they* want.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The maintainer(s) and contributors to Bitcoin Knots are free to determine what default policy rules they want to implement (and make it easier for users to change those defaults) in the absence of those policy rules being made effective consensus rules. I suspect there would be strong opposition to making some policy rules effective consensus rules but we are now venturing again into future speculation and none of us have a crystal ball. Certainly if you take the view that these policy rules should never be made effective consensus rules then the fact there is at least one implementation taking a contrasting approach to Core is a good thing.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Michael Folkson
</I>&gt;&gt;<i> Email: michaelfolkson at [protonmail.com](<A HREF="http://protonmail.com/">http://protonmail.com/</A>)
</I>&gt;&gt;<i> Keybase: michaelfolkson
</I>&gt;&gt;<i> PGP: 43ED C999 9F85 1D40 EAF4 9835 92D6 0159 214C FEE3
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ------- Original Message -------
</I>&gt;&gt;<i> On Sunday, February 13th, 2022 at 6:09 AM, Prayank via Lightning-dev &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">lightning-dev at lists.linuxfoundation.org</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hello World,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> There was a discussion about improving fee estimation in Bitcoin Core last year in which 'instagibbs' mentioned that we cannot consider mempool as an orderbook in which which everyone is bidding for block space because nodes can use different relay policies: <A HREF="https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2021-09-22#706294;">https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2021-09-22#706294;</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Although I still don't consider fee rates used in last few blocks relevant for fee estimation, it is possible that we have nodes with different relay policies.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Similarly if we have different RBF policies being used by nodes in future, how would this affect the security of lightning network implementations and other layer 2 projects?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Based on the things shared by 'aj' in
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-February/019846.html">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-February/019846.html</A> it is possible for an attacker to use a different RBF policy with some nodes, 10% hash power and affect the security of different projects that rely on default RBF policy in latest Bitcoin Core.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> There was even a CVE in which RBF policy not being documented according to the implementation could affect the security of LN:
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-May/018893.html">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-May/018893.html</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 1.Is Lightning Network and a few other layer 2 projects vulnerable to multiple RBF policies being used?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 2.With recent discussion to change things in default RBF policy used by Core, will we have multiple versions using different policies? Are users and especially miners incentivized to use different versions and policies? Do they have freedom to use different RBF policy?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 3.Are the recent improvements suggested for RBF policy only focused on Lightning Network and its security which will anyway remain same or become worse with multiple RBF policies?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Note: Bitcoin Knots policy is fully configurable, even in the GUI - users can readily choose whatever policy *they* want.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> Prayank
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> A3B1 E430 2298 178F
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20220214/c2938382/attachment-0001.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20220214/c2938382/attachment-0001.html</A>&gt;
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003466.html">[Lightning-dev] Lightning and other layer 2 projects with multiple RBF policies
</A></li>
	<LI>Next message: <A HREF="003469.html">[Lightning-dev] Lightning and other layer 2 projects with multiple RBF policies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3468">[ date ]</a>
              <a href="thread.html#3468">[ thread ]</a>
              <a href="subject.html#3468">[ subject ]</a>
              <a href="author.html#3468">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
