<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Multi-frame sphinx onion format
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-February/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Multi-frame%20sphinx%20onion%20format&In-Reply-To=%3C87k1hp6pav.fsf%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001883.html">
   <LINK REL="Next"  HREF="001888.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Multi-frame sphinx onion format</H1>
    <B>Christian Decker</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Multi-frame%20sphinx%20onion%20format&In-Reply-To=%3C87k1hp6pav.fsf%40gmail.com%3E"
       TITLE="[Lightning-dev] Multi-frame sphinx onion format">decker.christian at gmail.com
       </A><BR>
    <I>Sun Feb 24 17:59:04 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="001883.html">[Lightning-dev] Multi-frame sphinx onion format
</A></li>
        <LI>Next message: <A HREF="001888.html">[Lightning-dev] LN on top of plasma chain?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1884">[ date ]</a>
              <a href="thread.html#1884">[ thread ]</a>
              <a href="subject.html#1884">[ subject ]</a>
              <a href="author.html#1884">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>ZmnSCPxj &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">ZmnSCPxj at protonmail.com</A>&gt; writes:
&gt;<i> Good morning Christian, Rusty, and list,
</I>&gt;<i> You can take this a step further and make the realm 0 byte into a
</I>&gt;<i> special type &quot;0&quot; which has a fixed length of 1299 bytes, with the
</I>&gt;<i> length never encoded for this special type.  It would then define the
</I>&gt;<i> next 1299 bytes as the &quot;V&quot;, having the format of 64 bytes of the
</I>&gt;<i> current hop format (short channel ID, amount, CLTV, 12-byte padding,
</I>&gt;<i> HMAC), plus 19*65 bytes as the encrypted form of the next hop data.
</I>&gt;<i> This lets us reclaim even the realm byte, removing its overhead by
</I>&gt;<i> re-encoding it as the type in a TLV system, and with the special
</I>&gt;<i> exception of dropping the &quot;L&quot; for the type 0 (== current realm 0)
</I>&gt;<i> case.
</I>
I disagree that this would be any clearer than the current proposal
since we completely lose the separation of payload encoding vs. onion
encoding. Let's not mix the concepts of payload and transport onion,
please.

&gt;<i> In short, drop the concept of 65-byte &quot;frames&quot;.
</I>&gt;<i>
</I>&gt;<i> We could have another special length-not-encoded type 255, which
</I>&gt;<i> declares the next 32 bytes as HMAC and the rest of the onion packet as
</I>&gt;<i> the data for the next hop.
</I>&gt;<i>
</I>&gt;<i> The above is not a particularly serious proposal.
</I>
You had me worried for a second there :-)
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001883.html">[Lightning-dev] Multi-frame sphinx onion format
</A></li>
	<LI>Next message: <A HREF="001888.html">[Lightning-dev] LN on top of plasma chain?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1884">[ date ]</a>
              <a href="thread.html#1884">[ thread ]</a>
              <a href="subject.html#1884">[ subject ]</a>
              <a href="author.html#1884">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
