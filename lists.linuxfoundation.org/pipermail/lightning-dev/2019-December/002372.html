<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Time-Dilation Attacks on Offchain Protocols
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-December/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Time-Dilation%20Attacks%20on%20Offchain%20Protocols&In-Reply-To=%3CkERpOf6S5do9kClNiLQU_hqsKXPDNlh_TVuPqj5XW7ysA11ctrBPLM2a-x4srghOGGl5giyPgkblXRoH7oGN8PaHqZ7P499gUT_IJkBQdvg%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002370.html">
   <LINK REL="Next"  HREF="002373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Time-Dilation Attacks on Offchain Protocols</H1>
    <B>ZmnSCPxj</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Time-Dilation%20Attacks%20on%20Offchain%20Protocols&In-Reply-To=%3CkERpOf6S5do9kClNiLQU_hqsKXPDNlh_TVuPqj5XW7ysA11ctrBPLM2a-x4srghOGGl5giyPgkblXRoH7oGN8PaHqZ7P499gUT_IJkBQdvg%3D%40protonmail.com%3E"
       TITLE="[Lightning-dev] Time-Dilation Attacks on Offchain Protocols">ZmnSCPxj at protonmail.com
       </A><BR>
    <I>Tue Dec 10 10:35:58 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="002370.html">[Lightning-dev] Time-Dilation Attacks on Offchain Protocols
</A></li>
        <LI>Next message: <A HREF="002373.html">[Lightning-dev] Time-Dilation Attacks on Offchain Protocols
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2372">[ date ]</a>
              <a href="thread.html#2372">[ thread ]</a>
              <a href="subject.html#2372">[ subject ]</a>
              <a href="author.html#2372">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning all,

&gt;<i> Nice writeup!
</I>
I agree.


&gt;<i> I'd encourage Lightning node authors and operators to ensure they have
</I>&gt;<i> multiple, redundant, trusted methods of receiving Bitcoin block data in
</I>&gt;<i> a timely fashion.
</I>
I believe there was some discussion before, possibly in Adelaide 2018, where we consider to also deliver header data over the LN wire protocol.
This is useful if and only if the Bitcoin fullnode we use is differently eclisable from the Lightning node we use, e.g. the Bitcoin fullnode is openly on an IPv4 address while the Lightning node is on a Tor hidden service.

&gt;<i> &gt; Some LN errors messages may be triggered at abnormal rate like
</I>&gt;<i> &gt; `expiry_too_soon` &#160;due to victim using a HTLC base in the past and may
</I>&gt;<i> &gt; be used to guess oddities.
</I>
A node might engage in background probing of payments that definitely will fail, and thereby get such information that way.

Let us consider the case where Alice is a victim of such an eclipse attack, and is only connected to nodes (Bitcoin and Lightning) controlled by Mallory.
Alice makes a outgoing probe, and as all its peers are controlled by Mallory, its first hop goes through Mallory and then goes to Bob and Charlie (who will fail the payment).
Bob may notice that the CLTV is too near the future and thus fail with `expiry_too_soon`.

However, against this, Mallory can simply directly fail payments.
It would have to fail all payments that were not forwarded via Alice (i.e. if there is no Mallory1-&gt;Alice forward with similar value and timing as the Alice-&gt;Mallory2 forward, Mallory2 will fail the payment) immediately.
This allows Mallory to sidestep such protections.

Regards,
ZmnSCPxj
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002370.html">[Lightning-dev] Time-Dilation Attacks on Offchain Protocols
</A></li>
	<LI>Next message: <A HREF="002373.html">[Lightning-dev] Time-Dilation Attacks on Offchain Protocols
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2372">[ date ]</a>
              <a href="thread.html#2372">[ thread ]</a>
              <a href="subject.html#2372">[ subject ]</a>
              <a href="author.html#2372">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
