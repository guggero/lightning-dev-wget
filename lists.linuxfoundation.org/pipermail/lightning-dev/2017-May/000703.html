<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Channel top-up
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2017-May/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Channel%20top-up&In-Reply-To=%3C3bRLhkGHycrJ8XM8iW-7fdEfsjQb4Jv2OlDfiwoH25-wH1T2zP1C2sjGF0Q8H4dLFh1FqMGLuacMoBKekuvKJVm2L9JCVcUs3AHewFaSabc%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000701.html">
   <LINK REL="Next"  HREF="000707.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Channel top-up</H1>
    <B>ZmnSCPxj</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Channel%20top-up&In-Reply-To=%3C3bRLhkGHycrJ8XM8iW-7fdEfsjQb4Jv2OlDfiwoH25-wH1T2zP1C2sjGF0Q8H4dLFh1FqMGLuacMoBKekuvKJVm2L9JCVcUs3AHewFaSabc%3D%40protonmail.com%3E"
       TITLE="[Lightning-dev] Channel top-up">ZmnSCPxj at protonmail.com
       </A><BR>
    <I>Fri May  5 04:58:11 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="000701.html">[Lightning-dev] Channel top-up
</A></li>
        <LI>Next message: <A HREF="000707.html">[Lightning-dev] Minor editorial fixes to lightning-rfc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#703">[ date ]</a>
              <a href="thread.html#703">[ thread ]</a>
              <a href="subject.html#703">[ subject ]</a>
              <a href="author.html#703">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning Rusty,

&gt;<i>ZmnSCPxj via Lightning-dev &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">lightning-dev at lists.linuxfoundation.org</A>&gt;
</I>&gt;<i>writes:
</I>&gt;&gt;<i> Good morning people,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I want to propose, the addition of a new operation (and related messages) to the Lightning Network protocol.
</I>&gt;<i>
</I>&gt;<i>Hi,
</I>&gt;<i>
</I>&gt;<i>Yes, we call this re-anchoring. The same method can be used for
</I>&gt;<i>adding or removing funds from the channel, by mutual cooperation. It
</I>&gt;<i>has the additional merit that (once deeply confirmed) you can forget
</I>&gt;<i>revocation information for any older commitment transactions.
</I>&gt;<i>
</I>&gt;<i>It was omitted from the 1.0 spec because we have more than enough in
</I>&gt;<i>there already.
</I>
I understand.

&gt;<i>But your solution seems overly complex? A or B can simply propose a new
</I>&gt;<i>funding transaction which spends the current one, both sides exchange
</I>&gt;<i>all the output signatures for a new commitment transaction which uses
</I>&gt;<i>that, then exchange signatures for the new funding transaction.
</I>
I'm sorry my poor understanding of complexity.

My thought, was that this simply allows an onion-route payment to be started on-chain. Then normal onion-route messages (update_fulfill_htlc etc) can be used.

Basically, my idea, if onion route code already exists, we just modify this a little by allowing an onion-route to start on-chain rather than on-Lightning. The onion route can still remain terminated into a Lightning node. So we need new message to allow onion route to be initiated on-chain/off-LN, but the rest of the onion-route uses the same, already-tested code.

Originally, I thought similarly to the splice-in/splice-out/reanchoring scheme. But I thought it would be more complex to add new message types to consider reanchoring.

&gt;<i>Even if the new funding tx isn't confirmed yet, they can continue to use
</I>&gt;<i>the channel as normal.
</I>&gt;<i>
</I>&gt;<i>(FWIW, Christian Decker was the one who pointed out how elegant this
</I>&gt;<i>is).
</I>
If the funding tx will only output (i.e. only reduce money on the channel), it's OK.

If the funding tx will input (increase money on the channel), then we need to confirm a pre-splice-in transaction. Then the reanchoring tx can be made safely &quot;floating&quot;, although since the pre-splice-in tx has a timelock, we should still anchor the reanchoring tx before the pre-splice-in transaction's timelock ends.

Regards,
ZmnSCPxj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20170505/0fc2860e/attachment.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20170505/0fc2860e/attachment.html</A>&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000701.html">[Lightning-dev] Channel top-up
</A></li>
	<LI>Next message: <A HREF="000707.html">[Lightning-dev] Minor editorial fixes to lightning-rfc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#703">[ date ]</a>
              <a href="thread.html#703">[ thread ]</a>
              <a href="subject.html#703">[ subject ]</a>
              <a href="author.html#703">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
