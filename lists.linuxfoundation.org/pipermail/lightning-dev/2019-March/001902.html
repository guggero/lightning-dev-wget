<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Fee structure
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-March/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Fee%20structure&In-Reply-To=%3CCAC9FWqW_uN%2Bmfrbmjw9xxY8od-eKwSo%2BiJk5FrxAEAqLZoj1DA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001899.html">
   <LINK REL="Next"  HREF="001903.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Fee structure</H1>
    <B>John-John Markstedt</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Fee%20structure&In-Reply-To=%3CCAC9FWqW_uN%2Bmfrbmjw9xxY8od-eKwSo%2BiJk5FrxAEAqLZoj1DA%40mail.gmail.com%3E"
       TITLE="[Lightning-dev] Fee structure">john-john at markstedts.org
       </A><BR>
    <I>Thu Mar 14 07:58:18 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="001899.html">[Lightning-dev] Fee structure
</A></li>
        <LI>Next message: <A HREF="001903.html">[Lightning-dev] Fee structure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1902">[ date ]</a>
              <a href="thread.html#1902">[ thread ]</a>
              <a href="subject.html#1902">[ subject ]</a>
              <a href="author.html#1902">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning Andrea and ZmnSCPxj,

I wrongly assumed the channel balances needed to be known anyway to create
a route. I see
now why that is not the case and why it would scale horribly, in fact it
scales no better than
layer 1 as everyone needs to be notified of every payment. It would also
defeat effort
of keeping payments private.
This is clearly the wrong line of thinking.

This is already possible within the protocol.
&gt;<i> Care must be taken that `channel_update` is not spammed, which potentially
</I>&gt;<i> leaks information about payments passing through the node.
</I>&gt;<i> A simple heuristic would be to have a random schedule of checking the
</I>&gt;<i> channel current state, sending a `channel_update` if the feerate should be
</I>&gt;<i> changed, then sleeping for a random number of seconds before checking again.
</I>&gt;<i> This will get you reasonably close to what you want, without too much
</I>&gt;<i> leakage of payments going through you.
</I>&gt;<i>
</I>
That would not regard the size of the payments though? A payment leaving
the balance at the far end would pay the same proportional fee as one close
to the middle.
Again fixing that issue by broadcasting each balance change wouldn't scale
well and run in the aforementioned leakage so is really a moot point.

I don't see setting the fee only regarding the initial state as obviously
beneficial to a routing node, anyway it would indeed be interesting to see
if
a node utilizing such a strategy, all else being equal, would outperform a
node not using it. I will implement something along this line
and see it that's the case or not.

JIT Routing from rpickhardt is more sensible as it attempts to rebalance
&gt;<i> only if it would benefit the node to perform the rebalancing.
</I>&gt;<i> (It is more accurately named &quot;JIT rebalancing&quot; actually)
</I>&gt;<i>
</I>
I will have another closer look at the JIT Routing emails.

-

Thanks both of you for taking the time to respond and pointing out the
clear flaws in this idea.

Best regards,
John-John Markstedt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20190314/1844dbf3/attachment.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20190314/1844dbf3/attachment.html</A>&gt;
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001899.html">[Lightning-dev] Fee structure
</A></li>
	<LI>Next message: <A HREF="001903.html">[Lightning-dev] Fee structure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1902">[ date ]</a>
              <a href="thread.html#1902">[ thread ]</a>
              <a href="subject.html#1902">[ subject ]</a>
              <a href="author.html#1902">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
