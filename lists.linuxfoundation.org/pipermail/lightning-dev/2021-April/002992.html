<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Replacement of invoices to handle stuck payments.
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-April/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Replacement%20of%20invoices%20to%20handle%20stuck%20payments.&In-Reply-To=%3C875z0mixbd.fsf%40rustcorp.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002995.html">
   <LINK REL="Next"  HREF="002996.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Replacement of invoices to handle stuck payments.</H1>
    <B>Rusty Russell</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Replacement%20of%20invoices%20to%20handle%20stuck%20payments.&In-Reply-To=%3C875z0mixbd.fsf%40rustcorp.com.au%3E"
       TITLE="[Lightning-dev] Replacement of invoices to handle stuck payments.">rusty at rustcorp.com.au
       </A><BR>
    <I>Fri Apr 16 05:59:50 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="002995.html">[Lightning-dev] Questions on lightning chan closure privacy
</A></li>
        <LI>Next message: <A HREF="002996.html">[Lightning-dev] Recovery of Lightning channels without backups
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2992">[ date ]</a>
              <a href="thread.html#2992">[ thread ]</a>
              <a href="subject.html#2992">[ subject ]</a>
              <a href="author.html#2992">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

        <A HREF="https://github.com/lightningnetwork/lightning-rfc/pull/798/commits/fc8aab72ccdd616301dc200fc124824efe4fbb58">https://github.com/lightningnetwork/lightning-rfc/pull/798/commits/fc8aab72ccdd616301dc200fc124824efe4fbb58</A>

I've just added a simple addition to the proposed BOLT 12 offers spec,
where invoice requests can ask to obsolete old invoices.  This allows a
simple workaround in the case where a payment is stuck: the vendor
commits to a new invoice which obsoletes the old one, using the
already-existing invoice_request message.

        If the vendor cheats and accepts both old and new payments, you
can prove they lied.  Or they can return an error which indicates
they've already received the payment and it's simply the return which is
stuck.

Either way, it's now simple to implement, and gives wallets another
option for handling these cases.

Cheers!
Rusty.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002995.html">[Lightning-dev] Questions on lightning chan closure privacy
</A></li>
	<LI>Next message: <A HREF="002996.html">[Lightning-dev] Recovery of Lightning channels without backups
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2992">[ date ]</a>
              <a href="thread.html#2992">[ thread ]</a>
              <a href="subject.html#2992">[ subject ]</a>
              <a href="author.html#2992">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
