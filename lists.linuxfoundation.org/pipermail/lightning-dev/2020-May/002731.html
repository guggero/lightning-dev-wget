<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Griefing-Penalty: A proposal for mitigating	Griefing Attack
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-May/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Griefing-Penalty%3A%20A%20proposal%20for%20mitigating%0A%09Griefing%20Attack&In-Reply-To=%3CDCEaIH3eGocfLuX3WbPVAiRzzcn3mt1T6JH7aVFFmkiF5hckn_XXUkSzF1C8qGPhjIqWd5SWpxwgCnhibXvMHkOLGfVg6thLoObxtcv5qCE%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002730.html">
   <LINK REL="Next"  HREF="002722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Griefing-Penalty: A proposal for mitigating	Griefing Attack</H1>
    <B>ZmnSCPxj</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Griefing-Penalty%3A%20A%20proposal%20for%20mitigating%0A%09Griefing%20Attack&In-Reply-To=%3CDCEaIH3eGocfLuX3WbPVAiRzzcn3mt1T6JH7aVFFmkiF5hckn_XXUkSzF1C8qGPhjIqWd5SWpxwgCnhibXvMHkOLGfVg6thLoObxtcv5qCE%3D%40protonmail.com%3E"
       TITLE="[Lightning-dev] Griefing-Penalty: A proposal for mitigating	Griefing Attack">ZmnSCPxj at protonmail.com
       </A><BR>
    <I>Sun May 31 14:51:34 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="002730.html">[Lightning-dev] Griefing-Penalty: A proposal for mitigating Griefing Attack
</A></li>
        <LI>Next message: <A HREF="002722.html">[Lightning-dev] Array-based Routemap Representation,	and the Advantages of Cheney 2-Finger Garbage Collection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2731">[ date ]</a>
              <a href="thread.html#2731">[ thread ]</a>
              <a href="subject.html#2731">[ subject ]</a>
              <a href="author.html#2731">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning Subhra,


&gt;<i> &gt;  Can you describe this in more detail?
</I>&gt;<i>
</I>&gt;<i> Here is our proposal for mitigating reverse-griefing&#160;<A HREF="https://gist.github.com/subhramazumdar/cf7b043a73db136f6a23091d20e51751">https://gist.github.com/subhramazumdar/cf7b043a73db136f6a23091d20e51751</A>
</I>&gt;<i> Looking forward to your comments.
</I>
Just to clarify my understanding, during the preprocessing stage no contracts are established yet?

If so, note that the locking phase is not safe to perform from recipient to sender (which is how it seems to be described).

* R and S are really the same entity (they can be the same node, the forwarding nodes A B and C would not be aware of this at all, or they could be two very cheaply generated pseudonyms of the same entity).
* R and C establish the contract for 7 msat, using 1 msat from C and 6 msat from R:
  * R shows x such that h = h(x) is true, with R getting 7 msat.
  * R shows r such that y = h(r) is true, with C getting 1 msat and R getting 6 msat.
  * After one day, C gets 7 msat.
* Similar contracts are established all the way to A.
* When A contacts S, S suddenly pretends to be asleep.
* R shows x (which it knows, because S and R are cooperating are the same and x is generated by S).
  * It thus gets 7 msat --- 6 msat originally from R, for a net gain of 1 msat.
* A is left holding the bag.

Initial contract establishment has to be done from S to R always, not R to S.
Multi-stage contracts can be done from R to S (arguably the simple resolution of HTLC chains is &quot;really' the second stage) for after the initial establishment, but initial establishment always has to be from S to R.

There may be other issues as well with the overall setup, please wait, I am considering as well what would happen if we correctly establish the contracts from S to R.

The onion packet can transfer secret data from S to R as well, there is no need for a separate communication from S to R.

Regards,
ZmnSCPxj
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002730.html">[Lightning-dev] Griefing-Penalty: A proposal for mitigating Griefing Attack
</A></li>
	<LI>Next message: <A HREF="002722.html">[Lightning-dev] Array-based Routemap Representation,	and the Advantages of Cheney 2-Finger Garbage Collection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2731">[ date ]</a>
              <a href="thread.html#2731">[ thread ]</a>
              <a href="subject.html#2731">[ subject ]</a>
              <a href="author.html#2731">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
