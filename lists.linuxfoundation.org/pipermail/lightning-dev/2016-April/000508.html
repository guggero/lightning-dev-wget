<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Acknowledgements in BOLT #2
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-April/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Acknowledgements%20in%20BOLT%20%232&In-Reply-To=%3CCAL3Hpbduih4ZoP45%2Bhh2j_Py2wvacM%2Buqp6dzj%2BpdX1pCGk84w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000507.html">
   <LINK REL="Next"  HREF="000510.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Acknowledgements in BOLT #2</H1>
    <B>Fabrice Drouin</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Acknowledgements%20in%20BOLT%20%232&In-Reply-To=%3CCAL3Hpbduih4ZoP45%2Bhh2j_Py2wvacM%2Buqp6dzj%2BpdX1pCGk84w%40mail.gmail.com%3E"
       TITLE="[Lightning-dev] Acknowledgements in BOLT #2">fabrice.drouin at acinq.fr
       </A><BR>
    <I>Fri Apr  1 14:57:37 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="000507.html">[Lightning-dev] Acknowledgements in BOLT #2
</A></li>
        <LI>Next message: <A HREF="000510.html">[Lightning-dev] Acknowledgements in BOLT #2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#508">[ date ]</a>
              <a href="thread.html#508">[ thread ]</a>
              <a href="subject.html#508">[ subject ]</a>
              <a href="author.html#508">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

We've thought about it some more and it seems now that htlc ids are
indeed not enough and we do have to take the acknowledge field into
account in some cases anyway. Consider the following scenario:
A sends ADD HTLC X, ADD HTLC Y, ADD HTLC Z
B sends FAIL Y
A has not yet received this last message and sends SIG Z
B receives  SIG Z which includes (X,Y,Z) and won't match expected
signature (X,Z). B has no way to know whether A did receive the &quot;FAIL
Y&quot; message or not without checking the 'acknowledge' field (as
mentioned by Rusty), and might decide that SIG Z is not valid and
close the channel, when it could just ignore it and keep it open.

Cheers,

Fabrice
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000507.html">[Lightning-dev] Acknowledgements in BOLT #2
</A></li>
	<LI>Next message: <A HREF="000510.html">[Lightning-dev] Acknowledgements in BOLT #2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#508">[ date ]</a>
              <a href="thread.html#508">[ thread ]</a>
              <a href="subject.html#508">[ subject ]</a>
              <a href="author.html#508">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
