<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Route reliability&lt;-&gt;fee trade-off control parameter
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-November/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Route%20reliability%3C-%3Efee%20trade-off%20control%0A%20parameter&In-Reply-To=%3C0100017d3f96460a-73915c56-dc1e-4338-8d51-7f00d255c356-000000%40email.amazonses.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003350.html">
   <LINK REL="Next"  HREF="003352.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Route reliability&lt;-&gt;fee trade-off control parameter</H1>
    <B>David A. Harding</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Route%20reliability%3C-%3Efee%20trade-off%20control%0A%20parameter&In-Reply-To=%3C0100017d3f96460a-73915c56-dc1e-4338-8d51-7f00d255c356-000000%40email.amazonses.com%3E"
       TITLE="[Lightning-dev] Route reliability&lt;-&gt;fee trade-off control parameter">dave at dtrt.org
       </A><BR>
    <I>Sat Nov 20 23:02:32 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="003350.html">[Lightning-dev] Route reliability&lt;-&gt;fee trade-off control parameter
</A></li>
        <LI>Next message: <A HREF="003352.html">[Lightning-dev] Route reliability&lt;-&gt;fee trade-off control	parameter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3351">[ date ]</a>
              <a href="thread.html#3351">[ thread ]</a>
              <a href="subject.html#3351">[ subject ]</a>
              <a href="author.html#3351">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Nov 15, 2021 at 04:25:26PM +0100, Joost Jager wrote:
&gt;<i> Reliability is a property of a route that can
</I>&gt;<i> be expressed as a probability. The probability that a route will be
</I>&gt;<i> successful.
</I>
I don't think users care about the abstract concept of reliability
that's being returned by the pathfinding code here.  What users care
about is &quot;how long will it take for my payment to make the point-of-sale
terminal turn green so I can walk away with my warm beverage?&quot;

This is basically analogous to the fee optimization question that
onchain wallets have been asking users for years: how many blocks do you
want to wait for [the first] confirmation?  The way that's presented to
users in software like Bitcoin Core is,

2 blocks (~20 minutes), x fee
6 blocks (~60 minutes), y fee
36 blocks (~6 hours), z fee
etc...

The onchain estimates in Bitcoin Core are based[1] on a 95% threshold.

If LN software speculatively chooses a series of attempts with a similar
95%, accounting for things like the probability of a stuck payment (made
worse by longer CLTV timeouts on some paths), it could present users
with the same sort of options:

~1 second, x fee
~3 seconds, y fee
~10 seconds, z fee

This allows the software to use its reliability scoring efficiently in
choosing what series of payment attempts to make and presents to the
user the information they need to make a choice appropriate for their
situation.  As a bonus, it makes it easier for wallet software to move
towards a world where there is no user-visible difference between
onchain and offchain payments, e.g.:

~1 second, w fee
~15 seconds, x fee
~10 minutes, y fee
~60 minutes, z fee

-Dave

[1] <A HREF="https://gist.github.com/morcos/d3637f015bc4e607e1fd10d8351e9f41">https://gist.github.com/morcos/d3637f015bc4e607e1fd10d8351e9f41</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20211120/dbb8d3d7/attachment.sig">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20211120/dbb8d3d7/attachment.sig</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003350.html">[Lightning-dev] Route reliability&lt;-&gt;fee trade-off control parameter
</A></li>
	<LI>Next message: <A HREF="003352.html">[Lightning-dev] Route reliability&lt;-&gt;fee trade-off control	parameter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3351">[ date ]</a>
              <a href="thread.html#3351">[ thread ]</a>
              <a href="subject.html#3351">[ subject ]</a>
              <a href="author.html#3351">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
