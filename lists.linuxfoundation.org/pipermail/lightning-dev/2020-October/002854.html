<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Hold fees: 402 Payment Required for Lightning	itself
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-October/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Hold%20fees%3A%20402%20Payment%20Required%20for%20Lightning%0A%09itself&In-Reply-To=%3CCAJBJmV_bmji6YMM4c2t%3DiZA73vPrqdPQt%3D69jH3Tjc4HoYfwAA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002852.html">
   <LINK REL="Next"  HREF="002861.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Hold fees: 402 Payment Required for Lightning	itself</H1>
    <B>Joost Jager</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Hold%20fees%3A%20402%20Payment%20Required%20for%20Lightning%0A%09itself&In-Reply-To=%3CCAJBJmV_bmji6YMM4c2t%3DiZA73vPrqdPQt%3D69jH3Tjc4HoYfwAA%40mail.gmail.com%3E"
       TITLE="[Lightning-dev] Hold fees: 402 Payment Required for Lightning	itself">joost.jager at gmail.com
       </A><BR>
    <I>Tue Oct 20 07:15:55 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="002852.html">[Lightning-dev] Hold fees: 402 Payment Required for Lightning	itself
</A></li>
        <LI>Next message: <A HREF="002861.html">[Lightning-dev] Hold fees: 402 Payment Required for Lightning	itself
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2854">[ date ]</a>
              <a href="thread.html#2854">[ thread ]</a>
              <a href="subject.html#2854">[ subject ]</a>
              <a href="author.html#2854">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Bastien,

Thanks for creating the summary!

While doing this exercise, I couldn't find a reason why the `reverse
&gt;<i> upfront payment` proposal
</I>&gt;<i> would be broken (notice that I described it using a flat amount after a
</I>&gt;<i> grace period, not an amount
</I>&gt;<i> based on the time HTLCs are held). Can someone point me to the most
</I>&gt;<i> obvious attacks on it?
</I>&gt;<i>
</I>&gt;<i> It feels to me that its only issue is that it still allows spamming for
</I>&gt;<i> durations smaller than the
</I>&gt;<i> grace period; my gut feeling is that if we add a smaller forward direction
</I>&gt;<i> upfront payment to
</I>&gt;<i> complement it it could be a working solution.
</I>&gt;<i>
</I>
The 'uncontrolled spamming' as you called it in your doc is pretty serious.
If you want to have fun, you should really try to spin up a bunch of
threads and keep your outgoing channels fully saturated with max length
routes going nowhere. I tried it on testnet and it was quite bad. All that
traffic is fighting for resources which makes it take even longer to unlock
the htlcs again.

I think that any solution should definitely address this case too.

Your proposal to add a small upfront payment, wouldn't that allow the
(arbitrary) grace period to be removed? It would mean that routing nodes
always need to pay something for forwarding spam, but if they do it quick
enough (honest nodes) that expense is covered by the upfront payment.

- Joost
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20201020/0861166d/attachment-0001.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20201020/0861166d/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002852.html">[Lightning-dev] Hold fees: 402 Payment Required for Lightning	itself
</A></li>
	<LI>Next message: <A HREF="002861.html">[Lightning-dev] Hold fees: 402 Payment Required for Lightning	itself
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2854">[ date ]</a>
              <a href="thread.html#2854">[ thread ]</a>
              <a href="subject.html#2854">[ subject ]</a>
              <a href="author.html#2854">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
