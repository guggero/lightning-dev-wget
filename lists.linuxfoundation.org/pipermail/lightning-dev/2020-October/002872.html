<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Hold fees: 402 Payment Required for Lightning	itself
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-October/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Hold%20fees%3A%20402%20Payment%20Required%20for%20Lightning%0A%09itself&In-Reply-To=%3Cc_WTWXzxvmHE4-ee2kEt3s6mZuN53sG-UaXiORWVfyuHYB8eLc7Ux0wTjwrs-wyL8-szm06NiwkORGby6ZaMWHqPqp9jzaalAmy8_Q9tzI0%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002870.html">
   <LINK REL="Next"  HREF="002831.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Hold fees: 402 Payment Required for Lightning	itself</H1>
    <B>ZmnSCPxj</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Hold%20fees%3A%20402%20Payment%20Required%20for%20Lightning%0A%09itself&In-Reply-To=%3Cc_WTWXzxvmHE4-ee2kEt3s6mZuN53sG-UaXiORWVfyuHYB8eLc7Ux0wTjwrs-wyL8-szm06NiwkORGby6ZaMWHqPqp9jzaalAmy8_Q9tzI0%3D%40protonmail.com%3E"
       TITLE="[Lightning-dev] Hold fees: 402 Payment Required for Lightning	itself">ZmnSCPxj at protonmail.com
       </A><BR>
    <I>Wed Oct 28 01:13:29 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="002870.html">[Lightning-dev] Hold fees: 402 Payment Required for Lightning	itself
</A></li>
        <LI>Next message: <A HREF="002831.html">[Lightning-dev] [RFC] Simplified (but less optimal) HTLC Negotiation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2872">[ date ]</a>
              <a href="thread.html#2872">[ thread ]</a>
              <a href="subject.html#2872">[ subject ]</a>
              <a href="author.html#2872">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning Bastien, Joost, and all,

An issue with the bidirectional upfront/hold fees is related to trustless offchain-to-onchain swaps, like Boltz and Lightning Loop.

As the claiming of the offchain side is dependent on claiming of the onchain side of the trustless swap mechanism, which is *definitely* slow, the swap service will in general be forced to pay up the hold fees.

It seems to me that the hold-fees mechanism cannot be ported over in the onchain side, so even if you set a &quot;reasonable&quot; grace period at the swap service of say 1 hour (and assuming forwarding nodes are OK with that humongous grace period!), the onchain side of the swap can delay the release of onchain.

To mitigate against this, the swap service would need to issue a separate invoice to pay for the hold fee for the &quot;real&quot; swap payment.
The Boltz protocol supports a separate mining-fee invoice (disabled on the Boltz production servers) that is issued after the invoice is &quot;locked in&quot; at the swap service, but I think that in view of the use of hold fee, a combined mining-fee+hold-fee invoice would have to be issued at the same time as the &quot;real&quot; swap invoice.

Regards,
ZmnSCPxj

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002870.html">[Lightning-dev] Hold fees: 402 Payment Required for Lightning	itself
</A></li>
	<LI>Next message: <A HREF="002831.html">[Lightning-dev] [RFC] Simplified (but less optimal) HTLC Negotiation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2872">[ date ]</a>
              <a href="thread.html#2872">[ thread ]</a>
              <a href="subject.html#2872">[ subject ]</a>
              <a href="author.html#2872">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
