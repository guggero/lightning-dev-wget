<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] eltoo: A Simplified update Mechanism for	Lightning and Off-Chain Contracts
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-May/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20eltoo%3A%20A%20Simplified%20update%20Mechanism%20for%0A%09Lightning%20and%20Off-Chain%20Contracts&In-Reply-To=%3CS_u-McN_skPfmgXsS71-iIshSAnVrcSEov3nSh3kP3KNaPw-iZhWGD2KzIb3-g3mH_HkNzD-n8VgfFiFvr1EJQ6ESrFGH4EgFaXQLF7lSy8%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001230.html">
   <LINK REL="Next"  HREF="001237.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] eltoo: A Simplified update Mechanism for	Lightning and Off-Chain Contracts</H1>
    <B>ZmnSCPxj</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20eltoo%3A%20A%20Simplified%20update%20Mechanism%20for%0A%09Lightning%20and%20Off-Chain%20Contracts&In-Reply-To=%3CS_u-McN_skPfmgXsS71-iIshSAnVrcSEov3nSh3kP3KNaPw-iZhWGD2KzIb3-g3mH_HkNzD-n8VgfFiFvr1EJQ6ESrFGH4EgFaXQLF7lSy8%3D%40protonmail.com%3E"
       TITLE="[Lightning-dev] eltoo: A Simplified update Mechanism for	Lightning and Off-Chain Contracts">ZmnSCPxj at protonmail.com
       </A><BR>
    <I>Wed May  2 12:16:29 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="001230.html">[Lightning-dev] eltoo: A Simplified update Mechanism for	Lightning and Off-Chain Contracts
</A></li>
        <LI>Next message: <A HREF="001237.html">[Lightning-dev] eltoo: A Simplified update Mechanism for	Lightning and Off-Chain Contracts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1234">[ date ]</a>
              <a href="thread.html#1234">[ thread ]</a>
              <a href="subject.html#1234">[ subject ]</a>
              <a href="author.html#1234">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning Christian,

&gt;<i> &gt; &gt; Hi Christian,
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Let me know if I have summarized the paper accurately below:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 1.  SIGHASH_NOINPUT removes all inputs of the transaction copy before
</I>&gt;<i> &gt; &gt;     
</I>&gt;<i> &gt; &gt;     signing/verifying.
</I>&gt;<i> &gt; &gt;     
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; It sets them to a known constant, in this case we just blank
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; them. Removing could entail more costly serialization depending on the
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; implementation. bitcoind serializes into a hash accumulator so it'd not
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; make a difference there, but others may do it differently.
</I>&gt;<i> 
</I>&gt;<i> Does this then mean that if the transaction has two inputs, we are still committing to the fact that there are two inputs? If so, it is probably useable together with SIGHASH_ANYONECANPAY.
</I>&gt;<i> 
</I>&gt;<i> In fact, it seems, if we are using this to provide additional fees to update transactions, we should also use SIGHASH_ANYONECANPAY on the update UTXO path so that we can add new inputs to the transaction that will pay for the fee.
</I>
Ha, no, looking at the detailed `SIGHASH_NOINPUT` spec, `hashPrevouts`, which normally commits to the other inputs, is blanked, so we do not commit to them either.  This means that `SIGHASH_NOINPUT` implicitly has a `SIGHASH_ANYONECANPAY`.

(the BIP `SIGHASH_NOINPUT` in the eltoo pdf does not mention `hashSequence`, but it seems you managed to add that to your github BIP repository)

Regards,
ZmnSCPxj
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001230.html">[Lightning-dev] eltoo: A Simplified update Mechanism for	Lightning and Off-Chain Contracts
</A></li>
	<LI>Next message: <A HREF="001237.html">[Lightning-dev] eltoo: A Simplified update Mechanism for	Lightning and Off-Chain Contracts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1234">[ date ]</a>
              <a href="thread.html#1234">[ thread ]</a>
              <a href="subject.html#1234">[ subject ]</a>
              <a href="author.html#1234">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
