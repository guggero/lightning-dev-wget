<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Lightning, the death of BIP62,	and Segregated Witness
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2015-November/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Lightning%2C%20the%20death%20of%20BIP62%2C%0A%09and%20Segregated%20Witness&In-Reply-To=%3C87si42n1ir.fsf%40rustcorp.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000363.html">
   <LINK REL="Next"  HREF="000311.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Lightning, the death of BIP62,	and Segregated Witness</H1>
    <B>Rusty Russell</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Lightning%2C%20the%20death%20of%20BIP62%2C%0A%09and%20Segregated%20Witness&In-Reply-To=%3C87si42n1ir.fsf%40rustcorp.com.au%3E"
       TITLE="[Lightning-dev] Lightning, the death of BIP62,	and Segregated Witness">rusty at rustcorp.com.au
       </A><BR>
    <I>Thu Nov 19 02:53:00 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000363.html">[Lightning-dev] Better privacy with SNARKs
</A></li>
        <LI>Next message: <A HREF="000311.html">[Lightning-dev] Lightning, the death of BIP62, and Segregated Witness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#310">[ date ]</a>
              <a href="thread.html#310">[ thread ]</a>
              <a href="subject.html#310">[ subject ]</a>
              <a href="author.html#310">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all!

        As you know, I designed a lightning variant which used only
non-experimental, in-planning BIPs[1].  One assumption was BIP62: in
particular, that anchor malleability wouldn't be an issue.  This was
flawed; BIP62 will never be deployed.

        There are several options from here:

1) Ignore it.  Malleated txs are non-standard.
2) Add a timeout to the anchor.  Limits the lifetime of the channel, and
   still means if it does happen you have to wait for the timeout.
3) Propose a reduced BIP62 which (say) only protects P2PKH, for a
   specific transaction version.
4) Take a leap of faith and assume Segregated Witness fixes all
   malleability.

I was debating between #1 and #3 for a while, but eventually settled on
#4.  Here's why:

1) While still pre-BIP, Pieter Wuille is working on a prototype now
   (Luke Jr came up with a sanish way of softforking it in).
2) Other parts of the lightning code (in particular, watching bitcoin
   transactions) become significantly simpler if malleability is
   ignored.
3) It's the right thing for Bitcoin; all smart contract systems want
   this.

This result is NOP for lightning in the short term; assuming SW is the
same as pretending malleability doesn't exist.  But if we need to add
malleability support later, it's going to be painful, since handling it
correctly in all the places it's missing will be hard.

Cheers,
Rusty.
PS.  Remember, every project has 3 major disasters.  Just wait until you
     see the next two!

[1] <A HREF="https://github.com/ElementsProject/lightning/blob/master/doc/deployable-lightning.pdf">https://github.com/ElementsProject/lightning/blob/master/doc/deployable-lightning.pdf</A>
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000363.html">[Lightning-dev] Better privacy with SNARKs
</A></li>
	<LI>Next message: <A HREF="000311.html">[Lightning-dev] Lightning, the death of BIP62, and Segregated Witness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#310">[ date ]</a>
              <a href="thread.html#310">[ thread ]</a>
              <a href="subject.html#310">[ subject ]</a>
              <a href="author.html#310">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
