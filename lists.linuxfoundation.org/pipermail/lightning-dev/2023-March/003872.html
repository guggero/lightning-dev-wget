<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] [Proposal] Payment Route Reservation
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-March/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20%5BProposal%5D%20Payment%20Route%20Reservation&In-Reply-To=%3CfvqoH7XZcdUQmPQ4BGoyD-e8mTMqGCztxnozbgIMG8_XYrjw_fGvSlZipECkkA0PyOEzStjRjmhf3IxIFlpXZPFg-wrdyD69_5GRyNG41jo%3D%40proton.me%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003884.html">
   <LINK REL="Next"  HREF="003881.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] [Proposal] Payment Route Reservation</H1>
    <B>g0b1el</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20%5BProposal%5D%20Payment%20Route%20Reservation&In-Reply-To=%3CfvqoH7XZcdUQmPQ4BGoyD-e8mTMqGCztxnozbgIMG8_XYrjw_fGvSlZipECkkA0PyOEzStjRjmhf3IxIFlpXZPFg-wrdyD69_5GRyNG41jo%3D%40proton.me%3E"
       TITLE="[Lightning-dev] [Proposal] Payment Route Reservation">g0b1el at proton.me
       </A><BR>
    <I>Thu Mar  2 13:35:38 UTC 2023</I>
    <P><UL>
        <LI>Previous message: <A HREF="003884.html">[Lightning-dev] Local Reputation to Mitigate Slow Jamming
</A></li>
        <LI>Next message: <A HREF="003881.html">[Lightning-dev] Jamming Mitigation Call Today
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3872">[ date ]</a>
              <a href="thread.html#3872">[ thread ]</a>
              <a href="subject.html#3872">[ subject ]</a>
              <a href="author.html#3872">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
There are two more improvements I missed in my first mail.

The first one is that all the nodes on the route get the same amount to reserve. So there is no need to put the amount inside the onion. This way node can fail reservation faster if there is no reservation balance left without opening the onion. Also, the onion gets smaller, and now it holds just the next hop information. This might simplify rendezvous routing(needs to explore this further).

And the second improvement is that we don't need HTLC onion in the second step. Route hops already contain all the information to create HTLC. So all that's left to do is for the sender to sign the commitment and to revoke the state with a first node in the route. Thus increase in payment latency would be just one more call between the route nodes.

Best Regards,
g0b1el

&gt;<i> If ASCII graphics are not rendering correctly, you can read the proposal on the mailing list archive, where for some reason are rendered correctly - <A HREF="../2023-February/003867.html">https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-February/003867.html</A>
</I></PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003884.html">[Lightning-dev] Local Reputation to Mitigate Slow Jamming
</A></li>
	<LI>Next message: <A HREF="003881.html">[Lightning-dev] Jamming Mitigation Call Today
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3872">[ date ]</a>
              <a href="thread.html#3872">[ thread ]</a>
              <a href="subject.html#3872">[ subject ]</a>
              <a href="author.html#3872">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
