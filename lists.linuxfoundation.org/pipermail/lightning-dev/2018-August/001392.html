<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Free Rebalancing Proposals
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-August/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Free%20Rebalancing%20Proposals&In-Reply-To=%3Ciy3InVbE6VqfUS4x_jjsJybaIHzn-7wEW0BGeEKd5DwpIzrnVyKNdd9qDPHpeYktyHy_K39pU8BpmDqLiHEmg-sDyisKQK_8ZvlHzSZTXXQ%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001391.html">
   <LINK REL="Next"  HREF="001393.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Free Rebalancing Proposals</H1>
    <B>ZmnSCPxj</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Free%20Rebalancing%20Proposals&In-Reply-To=%3Ciy3InVbE6VqfUS4x_jjsJybaIHzn-7wEW0BGeEKd5DwpIzrnVyKNdd9qDPHpeYktyHy_K39pU8BpmDqLiHEmg-sDyisKQK_8ZvlHzSZTXXQ%3D%40protonmail.com%3E"
       TITLE="[Lightning-dev] Free Rebalancing Proposals">ZmnSCPxj at protonmail.com
       </A><BR>
    <I>Tue Aug 14 02:46:45 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="001391.html">[Lightning-dev] Free Rebalancing Proposals
</A></li>
        <LI>Next message: <A HREF="001393.html">[Lightning-dev] Measuring Lightning Nodes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1392">[ date ]</a>
              <a href="thread.html#1392">[ thread ]</a>
              <a href="subject.html#1392">[ subject ]</a>
              <a href="author.html#1392">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning Robert,

&gt;<i> Good Morning ZmnSCPxj!
</I>&gt;<i>
</I>&gt;<i> I was thinking using the normal onion-routing, probably modified in some way so it can read and modify max. Must admit I haven't studied that part at that level at all.
</I>&gt;<i>
</I>&gt;<i> For simple three-member constructs it could be enough with a simple non-onion message that A asks B if it would like to rebalance AB,BC and A asks C if it would like to balance BC,CA.
</I>&gt;<i>
</I>&gt;<i> But first it seems I have to at least try to convince you that rebalancing does help solve some problems.
</I>&gt;<i>
</I>&gt;<i> I think rebalancing is good for many reasons.
</I>&gt;<i> Consider a node A that has the following channel balances. It initiated A-B with 100sat and used that up instantly. C initiated an inbound channel of 200sat. A made a new channel A-D with 300sat
</I>&gt;<i> It ended up looking like the following:
</I>&gt;<i>
</I>&gt;<i> A-B     0-100
</I>&gt;<i> A-C     0-200
</I>&gt;<i> A-D     300-0
</I>&gt;<i>
</I>&gt;<i> For simplicity in this case the total balance is 300-300. Also lets say &quot;balanced&quot; means &quot;able to send and receive 25 sat&quot;. Achieving total balance on all channels is not realistic. It's up to each node to decide their own definition.
</I>&gt;<i>
</I>&gt;<i> A has only one channel to send out via. If D goes down it has even fewer.
</I>&gt;<i> So my idea is: A finds if there exists any D-C channel (or multi-hop), and politely asks whomever it may concern if sending 100 sat A-&gt;D-&gt;C-&gt;A would benefit them as well. if it does you send over 100 sat and will end up with
</I>&gt;<i>
</I>&gt;<i> A-B     0-100
</I>&gt;<i> A-C     100-100
</I>&gt;<i> A-D     200-100
</I>
But what is the state before and the state after of channel D-C?  Have you considered?

I postulate that in any case where rebalancing is possible, then a payment route exists that is sufficient for payment to the network, and in the end, the purpose of LN is payment, not some ideal of channel balance.  This idea is a consequence of studying what I call &quot;cyclic superhubs&quot; where cycles of channels start with each channel consistently unbalanced in one direction and yet every node on that cycle is capable of paying to every other node on that cycle without need of explicit rebalancing.  Hence my reluctance to consider the addition of rebalancing at all.

I think dynamic fee changing (lowering and increasing fees for channel directions you wish to rebalance away/towards you) is sufficient, and requires no update to the base LN protocol (but requires updating of actual implementations, since they all use fixed fees).

Regards,
ZmnSCPxj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20180814/04d54db2/attachment.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20180814/04d54db2/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001391.html">[Lightning-dev] Free Rebalancing Proposals
</A></li>
	<LI>Next message: <A HREF="001393.html">[Lightning-dev] Measuring Lightning Nodes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1392">[ date ]</a>
              <a href="thread.html#1392">[ thread ]</a>
              <a href="subject.html#1392">[ subject ]</a>
              <a href="author.html#1392">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
