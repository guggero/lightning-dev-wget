<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Payment sender authentication
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-December/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Payment%20sender%20authentication&In-Reply-To=%3CCAJBJmV_r%3D_1rZMxOUEpiBDWbCXrr9Z%3DbVeukhDZ2ontNSKONTA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003427.html">
   <LINK REL="Next"  HREF="003431.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Payment sender authentication</H1>
    <B>Joost Jager</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Payment%20sender%20authentication&In-Reply-To=%3CCAJBJmV_r%3D_1rZMxOUEpiBDWbCXrr9Z%3DbVeukhDZ2ontNSKONTA%40mail.gmail.com%3E"
       TITLE="[Lightning-dev] Payment sender authentication">joost.jager at gmail.com
       </A><BR>
    <I>Mon Dec 20 08:01:37 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="003427.html">[Lightning-dev] Payment sender authentication
</A></li>
        <LI>Next message: <A HREF="003431.html">[Lightning-dev] Payment sender authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3430">[ date ]</a>
              <a href="thread.html#3430">[ thread ]</a>
              <a href="subject.html#3430">[ subject ]</a>
              <a href="author.html#3430">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi fiatjaf and peter,

On Sat, Dec 18, 2021 at 2:08 PM fiatjaf &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">fiatjaf at gmail.com</A>&gt; wrote:

&gt;<i> As a temporary solution, I suggest taking a look at
</I>&gt;<i> <A HREF="https://github.com/fiatjaf/lnurl-rfc/blob/luds/18.md.">https://github.com/fiatjaf/lnurl-rfc/blob/luds/18.md.</A> The idea is that
</I>&gt;<i> you can either provide
</I>&gt;<i>  - a lone pubkey (to be used for manually identifying the payer later if
</I>&gt;<i> necessary);
</I>&gt;<i>  - a domain-specific pubkey along with a signature of a challenge provided
</I>&gt;<i> by the receiver; or
</I>&gt;<i>  - an unauthenticated name or email (for light things like donations for
</I>&gt;<i> which one may not care very much about cryptographic authentication).
</I>&gt;<i> And then you commit these things, whatever they are, inside the BOLT11
</I>&gt;<i> payment request using the 'h' tag.
</I>&gt;<i>
</I>
Interesting read. I see it uses a signature, but is that a good idea? It
could allow the receiver to prove to a 3rd party that the payment was made.
I guess it depends on the application if that is desired or not. The more
privacy conscious users would probably try to avoid committing to data via
a signature.

On Sat, Dec 18, 2021 at 6:56 PM Peter Todd &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">pete at petertodd.org</A>&gt; wrote:

&gt;<i> Lightning already has sender authentication: you simply give someone a
</I>&gt;<i> pre-image hash over an authenticated channel, and the fact that the
</I>&gt;<i> payment was
</I>&gt;<i> made means only they could have realistically made it as they were the only
</I>&gt;<i> person who knew that pre-image hash.
</I>&gt;<i>
</I>
This sounds quite similar to what is described above in lnurl-18. I can see
that that works, but I should have added that I was looking for a solution
that exists completely within the protocol without using an additional
channel. Also, routing nodes learn the preimage hash too, so the sender
isn't the only person. But that is solved by the payment secret that is
also part of the invoice.


&gt;<i> Going beyond that is dangerous as you're creating the ability to prove to a
</I>&gt;<i> *third* party who made a particular payment. That raises serious problems
</I>&gt;<i> in
</I>&gt;<i> cases like government raids that need to be considered very carefully.
</I>

This is why I proposed to use diffie-hellman to generate a shared secret.
The receiver could then have made up all the proofs themselves and are
therefore of no value to a third party.

Joost
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20211220/94125b03/attachment.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20211220/94125b03/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003427.html">[Lightning-dev] Payment sender authentication
</A></li>
	<LI>Next message: <A HREF="003431.html">[Lightning-dev] Payment sender authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3430">[ date ]</a>
              <a href="thread.html#3430">[ thread ]</a>
              <a href="subject.html#3430">[ subject ]</a>
              <a href="author.html#3430">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
