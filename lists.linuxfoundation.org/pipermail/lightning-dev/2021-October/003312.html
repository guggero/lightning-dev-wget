<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] A Mobile Lightning User Goes to Pay a Mobile Lightning User...
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-October/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20A%20Mobile%20Lightning%20User%20Goes%20to%20Pay%20a%20Mobile%0A%20Lightning%20User...&In-Reply-To=%3C63c4148f-d7ae-1f05-1aa0-6ed4c84950f3%40mattcorallo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003311.html">
   <LINK REL="Next"  HREF="003313.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] A Mobile Lightning User Goes to Pay a Mobile Lightning User...</H1>
    <B>Matt Corallo</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20A%20Mobile%20Lightning%20User%20Goes%20to%20Pay%20a%20Mobile%0A%20Lightning%20User...&In-Reply-To=%3C63c4148f-d7ae-1f05-1aa0-6ed4c84950f3%40mattcorallo.com%3E"
       TITLE="[Lightning-dev] A Mobile Lightning User Goes to Pay a Mobile Lightning User...">lf-lists at mattcorallo.com
       </A><BR>
    <I>Wed Oct 13 16:57:57 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="003311.html">[Lightning-dev] A Mobile Lightning User Goes to Pay a Mobile	Lightning User...
</A></li>
        <LI>Next message: <A HREF="003313.html">[Lightning-dev] A Mobile Lightning User Goes to Pay a Mobile	Lightning User...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3312">[ date ]</a>
              <a href="thread.html#3312">[ thread ]</a>
              <a href="subject.html#3312">[ subject ]</a>
              <a href="author.html#3312">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 10/13/21 02:58, ZmnSCPxj wrote:
&gt;<i> Good morning Matt,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i>      The Obvious (tm) solution here is PTLCs - just have the sender always add some random nonce * G to
</I>&gt;&gt;<i>      the PTLC they're paying and send the recipient a random nonce in the onion. I'd generally suggest we
</I>&gt;&gt;<i>      just go ahead and do this for every PTLC payment, cause why not? Now the sender and the lnurl
</I>&gt;&gt;<i>      endpoint have to collude to steal the funds, but, like, the sender could always just give the lnurl
</I>&gt;&gt;<i>      endpoint the money. I'd love suggestions for fixing this short of PTLCs, but its not immediately
</I>&gt;&gt;<i>      obvious to me that this is possible.
</I>&gt;<i> 
</I>&gt;<i> Use two hashes in an HTLC instead of one, where the second hash is from a preimage the sender generates, and which the sender sends (encrypted via onion) to the receiver.
</I>&gt;<i> You might want to do this anyway in HTLC-land, consider that we have a `payment_secret` in invoices, the second hash could replace that, and provide similar protection to what `payment_secret` provides (i.e. resistance against forwarding nodes probing; the information in both cases is private to the ultimate sender and ultimate reeceiver).
</I>
Yes, you could create a construction which does this, sure, but I'm not sure how you'd do this 
without informing every hop along the path that this is going on, and adapting each hop to handle 
this as well. I suppose I should have been more clear with the requirements, or can you clarify 
somewhat what your proposed construction is?

If you're gonna adapt every node in the path, you might as well just use PTLC.

Matt
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003311.html">[Lightning-dev] A Mobile Lightning User Goes to Pay a Mobile	Lightning User...
</A></li>
	<LI>Next message: <A HREF="003313.html">[Lightning-dev] A Mobile Lightning User Goes to Pay a Mobile	Lightning User...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3312">[ date ]</a>
              <a href="thread.html#3312">[ thread ]</a>
              <a href="subject.html#3312">[ subject ]</a>
              <a href="author.html#3312">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
