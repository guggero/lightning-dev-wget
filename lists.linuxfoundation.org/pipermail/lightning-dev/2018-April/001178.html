<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Decker-Wattenhofer channels (was: An Idea to	Improve Connectivity of the Graph)
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-April/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Decker-Wattenhofer%20channels%20%28was%3A%20An%20Idea%20to%0A%09Improve%20Connectivity%20of%20the%20Graph%29&In-Reply-To=%3C0I4teAIB5C5yDWJH8-5QhPCDBt6aLdOuYvgONL05K0jpaZ2ipUj2H2XtMfXYS0cwzU5jBw76OpZfVdkMF3WQaYtbiyu0-qewOIWh-bbSkcQ%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001193.html">
   <LINK REL="Next"  HREF="001180.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Decker-Wattenhofer channels (was: An Idea to	Improve Connectivity of the Graph)</H1>
    <B>ZmnSCPxj</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Decker-Wattenhofer%20channels%20%28was%3A%20An%20Idea%20to%0A%09Improve%20Connectivity%20of%20the%20Graph%29&In-Reply-To=%3C0I4teAIB5C5yDWJH8-5QhPCDBt6aLdOuYvgONL05K0jpaZ2ipUj2H2XtMfXYS0cwzU5jBw76OpZfVdkMF3WQaYtbiyu0-qewOIWh-bbSkcQ%3D%40protonmail.com%3E"
       TITLE="[Lightning-dev] Decker-Wattenhofer channels (was: An Idea to	Improve Connectivity of the Graph)">ZmnSCPxj at protonmail.com
       </A><BR>
    <I>Fri Apr 13 13:41:32 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="001193.html">[Lightning-dev] Commitment delay asymmetry
</A></li>
        <LI>Next message: <A HREF="001180.html">[Lightning-dev] Decker-Wattenhofer channels (was: An Idea to	Improve Connectivity of the Graph)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1178">[ date ]</a>
              <a href="thread.html#1178">[ thread ]</a>
              <a href="subject.html#1178">[ subject ]</a>
              <a href="author.html#1178">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Good morning Christian,

I wonder suddenly, about how HTLCs are offered under Decker-Wattenhofer Duplex Micropayment Channels.

Under the Decker-Wattenhofer construction, I believe the transaction sequence is the below:

funding -&gt; trigger -&gt; (relative-timelock) invalidation tree -&gt; ... (relative-timelock) invalidation tree

The outputs of the final invalidation tree transaction splits up the contents of the funds between the payer and payee in the individual simplex channels that compose the duplex channels.

However, HTLCs have an absolute timelock, so I am uncertain how those are forced into compatibility with the relative timelock the invalidation tree uses.

Under Poon-Dryja channels, the relative-timelock exists only on the claim transaction after a unilateral commitment transaction.  HTLCs are offered as outputs of the unilateral commitment transaction, so that the relative-timelock on the main output does not interfere with their normal operation (apparently the HTLCs offered can also be revoked, incidentally, though I have not studied them in detail: apparently unrevoked HTLC paths that go to ourself have an extra CSV in the HTLC-timeout and HTLC-success paths: but in any case the HTLC-timeout case, the relative timelock is relative to the absolute one that comes first).

This is of concern as this seems likely to affect Burchert-Decker-Wattenhofer channel factories, which use invalidation trees internally also, which come before the HTLCs they eventually pay out to.

Regards,
ZmnSCPxj
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001193.html">[Lightning-dev] Commitment delay asymmetry
</A></li>
	<LI>Next message: <A HREF="001180.html">[Lightning-dev] Decker-Wattenhofer channels (was: An Idea to	Improve Connectivity of the Graph)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1178">[ date ]</a>
              <a href="thread.html#1178">[ thread ]</a>
              <a href="subject.html#1178">[ subject ]</a>
              <a href="author.html#1178">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
