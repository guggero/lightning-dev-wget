<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Lightning over NFC
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-April/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Lightning%20over%20NFC&In-Reply-To=%3CnqgDLYKKFPg5UKAzk2RRiVqbNWQeM6Jm_Asp5JBVSz7n4T2QajXbKU0kiyeN-v6IkWqa2kZ34Xa3brTrgppOrGguOSVVbI8LUiQHFdybyhQ%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001134.html">
   <LINK REL="Next"  HREF="001137.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Lightning over NFC</H1>
    <B>ZmnSCPxj</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Lightning%20over%20NFC&In-Reply-To=%3CnqgDLYKKFPg5UKAzk2RRiVqbNWQeM6Jm_Asp5JBVSz7n4T2QajXbKU0kiyeN-v6IkWqa2kZ34Xa3brTrgppOrGguOSVVbI8LUiQHFdybyhQ%3D%40protonmail.com%3E"
       TITLE="[Lightning-dev] Lightning over NFC">ZmnSCPxj at protonmail.com
       </A><BR>
    <I>Thu Apr  5 16:53:52 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="001134.html">[Lightning-dev] Lightning over NFC
</A></li>
        <LI>Next message: <A HREF="001137.html">[Lightning-dev] Lightning over NFC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1136">[ date ]</a>
              <a href="thread.html#1136">[ thread ]</a>
              <a href="subject.html#1136">[ subject ]</a>
              <a href="author.html#1136">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning Corne,

My understanding, of the setup of Igor, is that, there is a Lightning-protocol connection between the mobile device and the base station/payment terminal device.

Initiating a payment to anyone on the network requires that you have direct communication with whoever you have a direct channel to.

If the mobile device can communicate only with the payment terminal, then it can only pay using channels with the only node it has a connection to.

The mobile device could pay anyone else on the network via that channel, but presumably the purpose of the payment terminal is to be the node that receives the payment.

If the payment terminal itself connects to anyone else, on behalf of the mobile device, then that is beyond the current Lightning protocol.  Perhaps Igor has added more messages that allow such a setup?

Communicating over a secure channel to a trusted server is how I imagine most practical mobile devices would work.  But what the payment terminal would provide, would not be a connection to the payment terminal node, but a connection to the Internet-in-general.

Regards,
ZmnSCPxj.


&#8203;Sent with ProtonMail Secure Email.&#8203;

&#8208;&#8208;&#8208;&#8208;&#8208;&#8208;&#8208; Original Message &#8208;&#8208;&#8208;&#8208;&#8208;&#8208;&#8208;

On April 5, 2018 11:52 PM, Corn&#233; Plooy via Lightning-dev &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">lightning-dev at lists.linuxfoundation.org</A>&gt; wrote:

&gt;<i> If there are censorship concerns, you could opt for a set-up where payer
</I>&gt;<i> 
</I>&gt;<i> has an authenticated connection to a trusted server, through the
</I>&gt;<i> 
</I>&gt;<i> Internet connection provided by payee. The trusted server can, for
</I>&gt;<i> 
</I>&gt;<i> instance, be a full Lightning node running at the payer's home.
</I>&gt;<i> 
</I>&gt;<i> The payer then only has to take a very light piece of electronics with
</I>&gt;<i> 
</I>&gt;<i> him/her. It will still be larger than a credit card (since
</I>&gt;<i> 
</I>&gt;<i> authentication should be done payer-side, e.g. with a PIN code), but it
</I>&gt;<i> 
</I>&gt;<i> can be smaller than a smart phone. Personally, I like this kind of
</I>&gt;<i> 
</I>&gt;<i> set-up, because I see cell phones as a huge privacy issue (you're
</I>&gt;<i> 
</I>&gt;<i> continuously transmitting your rough location to the network).
</I>&gt;<i> 
</I>&gt;<i> Why would there need to be a direct channel between payer and payee? We
</I>&gt;<i> 
</I>&gt;<i> have the Lightning network to avoid needing direct channels, right?
</I>&gt;<i> 
</I>&gt;<i> CJP
</I>&gt;<i> 
</I>&gt;<i> Op 05-04-18 om 17:39 schreef ZmnSCPxj via Lightning-dev:
</I>&gt;<i> 
</I>&gt;<i> &gt; Good morning Igor,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; This is quite an interesting use-case for Lightning.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; However it seems to me that the payer will need a direct channel to
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; the payee, or at least the payment terminal (of the payee...?).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; In addition the payer will need to somehow get blockchain information
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; from the payee if the payer itself has no Internet.&#160; The payee may
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; have an incentive to prevent the payer from knowing that timeouts have
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; been reached, for example, and may withhold new blocks (although all
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; censorship attacks I know of that could be used on LN target the payee
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; and not the payer).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Is my understanding correct?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ZmnSCPxj
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Sent with ProtonMail <A HREF="https://protonmail.com">https://protonmail.com</A> Secure Email.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &#8208;&#8208;&#8208;&#8208;&#8208;&#8208;&#8208; Original Message &#8208;&#8208;&#8208;&#8208;&#8208;&#8208;&#8208;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; On April 5, 2018 5:46 PM, Igor Cota <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">igor at codexapertus.com</A> wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; Hello all,
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I feel that one of the biggest promises of lightning lies in it being
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; used for everyday retail payments.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I'd like to see a system that's:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 1.  instantaneous like the contactless bank cards of today
</I>&gt;<i> &gt; &gt; 2.  encodes a fancy HTML receipt in bolt11 for the payers future reference
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; QR codes are a bit unwieldy and even more so if you want a nice HTML
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; table description of your grocery shopping with hundreds of items -
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; this relatively large amount of data makes them impractical to scan.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; To this end I've been running an instance of c-lightning on Android
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; [1][2][3] and experimenting with payments via NFC. I set up a machine
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; with an NFC USB dongle that acts as an point-of-sale terminal [4]. So
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; far so good!
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; There are two basic ways you can use NFC enabled phones today - as
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; passive tag readers or in card emulation mode (not sure if the latter
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; is available on iOS).
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Passive tags are really simple and encoding bolt11 to them works as
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; expected. If you set the right MIME type Android will open whatever
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; app is registered to handle lightning and you can either pay
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; instantaneously or after user confirmation. Works great provided both
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; the phone and terminal are connected to the network and have a route
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; to each other.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Card emulation mode is more interesting because it enables us to have
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; two way communication and therefore an ad hoc connection to the
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; lightning network. After some handshaking, phone can tell the
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; terminal that it wants to connect to lightning via NFC. All
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; communication between these two lightning nodes can be done over NFC
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; or even bluetooth [5]. This might be useful as fallback in situations
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; where mobile data is not available.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I settled on a MIME type (application/lightning) and an NFC
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; application id (LIGHTNING). There is also a very simple protocol to
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; forward socket data. For the sake of interoperability it would be
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; great if we agreed on some standards but I'm not sure how to proceed
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; with this. Should these be part of a future BOLT or is mailing list
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; banter enough?
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; I look forward to your views!
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Cheers,
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Igor
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; [1]
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; <A HREF="https://github.com/ElementsProject/lightning/commit/bd95aba7a5f9bad8f447bf3de8f7e8cfe83751af">https://github.com/ElementsProject/lightning/commit/bd95aba7a5f9bad8f447bf3de8f7e8cfe83751af</A>
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; [2]
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; <A HREF="https://github.com/ElementsProject/lightning/commit/d4d1c4acb08efb6be4f491cdee5cb6dd4b84ddf7">https://github.com/ElementsProject/lightning/commit/d4d1c4acb08efb6be4f491cdee5cb6dd4b84ddf7</A>
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; [3]
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; <A HREF="https://github.com/ElementsProject/lightning/commit/bd95aba7a5f9bad8f447bf3de8f7e8cfe83751af">https://github.com/ElementsProject/lightning/commit/bd95aba7a5f9bad8f447bf3de8f7e8cfe83751af</A>
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; [4] <A HREF="https://github.com/icota/presto">https://github.com/icota/presto</A>
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; [5] <A HREF="https://github.com/ElementsProject/lightning/pull/1323">https://github.com/ElementsProject/lightning/pull/1323</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Lightning-dev mailing list
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">Lightning-dev at lists.linuxfoundation.org</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev</A>
</I>&gt;<i> 
</I>&gt;<i> Lightning-dev mailing list
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">Lightning-dev at lists.linuxfoundation.org</A>
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev</A>
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001134.html">[Lightning-dev] Lightning over NFC
</A></li>
	<LI>Next message: <A HREF="001137.html">[Lightning-dev] Lightning over NFC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1136">[ date ]</a>
              <a href="thread.html#1136">[ thread ]</a>
              <a href="subject.html#1136">[ subject ]</a>
              <a href="author.html#1136">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
