<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Lightning over NFC
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-April/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Lightning%20over%20NFC&In-Reply-To=%3CCAJx8jdye-cePZpzcVmr-gY8QWj2eGTi7OVUdtjQvRaSh_6t0Ww%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001136.html">
   <LINK REL="Next"  HREF="001135.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Lightning over NFC</H1>
    <B>Igor Cota</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Lightning%20over%20NFC&In-Reply-To=%3CCAJx8jdye-cePZpzcVmr-gY8QWj2eGTi7OVUdtjQvRaSh_6t0Ww%40mail.gmail.com%3E"
       TITLE="[Lightning-dev] Lightning over NFC">igor at codexapertus.com
       </A><BR>
    <I>Fri Apr  6 06:10:09 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="001136.html">[Lightning-dev] Lightning over NFC
</A></li>
        <LI>Next message: <A HREF="001135.html">[Lightning-dev] An Idea to Improve Connectivity of the Graph
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1137">[ date ]</a>
              <a href="thread.html#1137">[ thread ]</a>
              <a href="subject.html#1137">[ subject ]</a>
              <a href="author.html#1137">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Morning all,


&gt;<i> However it seems to me that the payer will need a direct channel to the
</I>payee, or at least the payment terminal (of the payee...?).

Yes, for the lightning NFC connection I had the local coffe shop use case
in mind.


&gt;<i> The trusted server can, for instance, be a full Lightning node running at
</I>the payer's home.

This is my current setup and I feel the only feasible one for the privacy
minded. For the time being at least.


&gt;<i> The payer then only has to take a very light piece of electronics with
</I>him/her. It will still be larger than a credit card (since authentication
should be done payer-side, e.g. with a PIN code), but it can be smaller
than a smart phone.

This is a great idea!


&gt;<i> But what the payment terminal would provide, would not be a connection to
</I>the payment terminal node, but a connection to the Internet-in-general.

&#191;Por qu&#233; no los dos?
I'm thinking of a protocol where (after initial BOLT-11 transfer) the
terminal and device agree on the means of connection depending on what they
respectively support or makes sense at that moment. There is a standard way
for NFC to handover to bluetooth or wifi, I'll look into that. Basically
whatever works as long as it seems seamless to the user and is relatively
quick.

I'm not so fussed about potential abuse for these types of payments. In my
experience people are less likely to scam you if you are physically there.
:<i>)
</I>
Thanks for your input! I made a pull request for the BOLT-11 MIME type and
I'll have a think-over bout the connection-handover business.

Cheers,
Igor



On 5 April 2018 at 18:53, ZmnSCPxj via Lightning-dev &lt;
<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">lightning-dev at lists.linuxfoundation.org</A>&gt; wrote:

&gt;<i> Good morning Corne,
</I>&gt;<i>
</I>&gt;<i> My understanding, of the setup of Igor, is that, there is a
</I>&gt;<i> Lightning-protocol connection between the mobile device and the base
</I>&gt;<i> station/payment terminal device.
</I>&gt;<i>
</I>&gt;<i> Initiating a payment to anyone on the network requires that you have
</I>&gt;<i> direct communication with whoever you have a direct channel to.
</I>&gt;<i>
</I>&gt;<i> If the mobile device can communicate only with the payment terminal, then
</I>&gt;<i> it can only pay using channels with the only node it has a connection to.
</I>&gt;<i>
</I>&gt;<i> The mobile device could pay anyone else on the network via that channel,
</I>&gt;<i> but presumably the purpose of the payment terminal is to be the node that
</I>&gt;<i> receives the payment.
</I>&gt;<i>
</I>&gt;<i> If the payment terminal itself connects to anyone else, on behalf of the
</I>&gt;<i> mobile device, then that is beyond the current Lightning protocol.  Perhaps
</I>&gt;<i> Igor has added more messages that allow such a setup?
</I>&gt;<i>
</I>&gt;<i> Communicating over a secure channel to a trusted server is how I imagine
</I>&gt;<i> most practical mobile devices would work.  But what the payment terminal
</I>&gt;<i> would provide, would not be a connection to the payment terminal node, but
</I>&gt;<i> a connection to the Internet-in-general.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> ZmnSCPxj.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &#8203;Sent with ProtonMail Secure Email.&#8203;
</I>&gt;<i>
</I>&gt;<i> &#8208;&#8208;&#8208;&#8208;&#8208;&#8208;&#8208; Original Message &#8208;&#8208;&#8208;&#8208;&#8208;&#8208;&#8208;
</I>&gt;<i>
</I>&gt;<i> On April 5, 2018 11:52 PM, Corn&#233; Plooy via Lightning-dev &lt;
</I>&gt;<i> <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">lightning-dev at lists.linuxfoundation.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; If there are censorship concerns, you could opt for a set-up where payer
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; has an authenticated connection to a trusted server, through the
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Internet connection provided by payee. The trusted server can, for
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; instance, be a full Lightning node running at the payer's home.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The payer then only has to take a very light piece of electronics with
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; him/her. It will still be larger than a credit card (since
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; authentication should be done payer-side, e.g. with a PIN code), but it
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; can be smaller than a smart phone. Personally, I like this kind of
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; set-up, because I see cell phones as a huge privacy issue (you're
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; continuously transmitting your rough location to the network).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Why would there need to be a direct channel between payer and payee? We
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; have the Lightning network to avoid needing direct channels, right?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; CJP
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Op 05-04-18 om 17:39 schreef ZmnSCPxj via Lightning-dev:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Good morning Igor,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; This is quite an interesting use-case for Lightning.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; However it seems to me that the payer will need a direct channel to
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; the payee, or at least the payment terminal (of the payee...?).
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; In addition the payer will need to somehow get blockchain information
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; from the payee if the payer itself has no Internet.  The payee may
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; have an incentive to prevent the payer from knowing that timeouts have
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; been reached, for example, and may withhold new blocks (although all
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; censorship attacks I know of that could be used on LN target the payee
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; and not the payer).
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Is my understanding correct?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; ZmnSCPxj
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Sent with ProtonMail <A HREF="https://protonmail.com">https://protonmail.com</A> Secure Email.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &#8208;&#8208;&#8208;&#8208;&#8208;&#8208;&#8208; Original Message &#8208;&#8208;&#8208;&#8208;&#8208;&#8208;&#8208;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On April 5, 2018 5:46 PM, Igor Cota <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">igor at codexapertus.com</A> wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Hello all,
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; I feel that one of the biggest promises of lightning lies in it being
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; used for everyday retail payments.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; I'd like to see a system that's:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; 1.  instantaneous like the contactless bank cards of today
</I>&gt;<i> &gt; &gt; &gt; 2.  encodes a fancy HTML receipt in bolt11 for the payers future
</I>&gt;<i> reference
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; QR codes are a bit unwieldy and even more so if you want a nice HTML
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; table description of your grocery shopping with hundreds of items -
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; this relatively large amount of data makes them impractical to scan.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; To this end I've been running an instance of c-lightning on Android
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; [1][2][3] and experimenting with payments via NFC. I set up a machine
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; with an NFC USB dongle that acts as an point-of-sale terminal [4]. So
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; far so good!
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; There are two basic ways you can use NFC enabled phones today - as
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; passive tag readers or in card emulation mode (not sure if the latter
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; is available on iOS).
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Passive tags are really simple and encoding bolt11 to them works as
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; expected. If you set the right MIME type Android will open whatever
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; app is registered to handle lightning and you can either pay
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; instantaneously or after user confirmation. Works great provided both
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; the phone and terminal are connected to the network and have a route
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; to each other.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Card emulation mode is more interesting because it enables us to have
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; two way communication and therefore an ad hoc connection to the
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; lightning network. After some handshaking, phone can tell the
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; terminal that it wants to connect to lightning via NFC. All
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; communication between these two lightning nodes can be done over NFC
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; or even bluetooth [5]. This might be useful as fallback in situations
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; where mobile data is not available.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; I settled on a MIME type (application/lightning) and an NFC
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; application id (LIGHTNING). There is also a very simple protocol to
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; forward socket data. For the sake of interoperability it would be
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; great if we agreed on some standards but I'm not sure how to proceed
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; with this. Should these be part of a future BOLT or is mailing list
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; banter enough?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; I look forward to your views!
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Cheers,
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Igor
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; [1]
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; <A HREF="https://github.com/ElementsProject/lightning/commit/">https://github.com/ElementsProject/lightning/commit/</A>
</I>&gt;<i> bd95aba7a5f9bad8f447bf3de8f7e8cfe83751af
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; [2]
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; <A HREF="https://github.com/ElementsProject/lightning/commit/">https://github.com/ElementsProject/lightning/commit/</A>
</I>&gt;<i> d4d1c4acb08efb6be4f491cdee5cb6dd4b84ddf7
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; [3]
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; <A HREF="https://github.com/ElementsProject/lightning/commit/">https://github.com/ElementsProject/lightning/commit/</A>
</I>&gt;<i> bd95aba7a5f9bad8f447bf3de8f7e8cfe83751af
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; [4] <A HREF="https://github.com/icota/presto">https://github.com/icota/presto</A>
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; [5] <A HREF="https://github.com/ElementsProject/lightning/pull/1323">https://github.com/ElementsProject/lightning/pull/1323</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Lightning-dev mailing list
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">Lightning-dev at lists.linuxfoundation.org</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Lightning-dev mailing list
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">Lightning-dev at lists.linuxfoundation.org</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Lightning-dev mailing list
</I>&gt;<i> <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">Lightning-dev at lists.linuxfoundation.org</A>
</I>&gt;<i> <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev</A>
</I>&gt;<i>
</I>


-- 
*Igor Cota*
Codex Apertus Ltd
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20180406/db51bf70/attachment-0001.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20180406/db51bf70/attachment-0001.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001136.html">[Lightning-dev] Lightning over NFC
</A></li>
	<LI>Next message: <A HREF="001135.html">[Lightning-dev] An Idea to Improve Connectivity of the Graph
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1137">[ date ]</a>
              <a href="thread.html#1137">[ thread ]</a>
              <a href="subject.html#1137">[ subject ]</a>
              <a href="author.html#1137">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
