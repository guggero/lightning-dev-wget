<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] [PATCH v3] daemon: encrypted communication	(version 3)
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2015-October/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20%5BPATCH%20v3%5D%20daemon%3A%20encrypted%20communication%0A%09%28version%203%29&In-Reply-To=%3C87io5sw13z.fsf%40rustcorp.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000294.html">
   <LINK REL="Next"  HREF="000301.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] [PATCH v3] daemon: encrypted communication	(version 3)</H1>
    <B>Rusty Russell</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20%5BPATCH%20v3%5D%20daemon%3A%20encrypted%20communication%0A%09%28version%203%29&In-Reply-To=%3C87io5sw13z.fsf%40rustcorp.com.au%3E"
       TITLE="[Lightning-dev] [PATCH v3] daemon: encrypted communication	(version 3)">rusty at rustcorp.com.au
       </A><BR>
    <I>Tue Oct 27 19:41:20 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000294.html">[Lightning-dev] [PATCH v3] daemon: encrypted communication (version 3)
</A></li>
        <LI>Next message: <A HREF="000301.html">[Lightning-dev] [PATCH v3] daemon: encrypted communication (version 3)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#298">[ date ]</a>
              <a href="thread.html#298">[ thread ]</a>
              <a href="subject.html#298">[ subject ]</a>
              <a href="author.html#298">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Pierre &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">pm+lists at acinq.fr</A>&gt; writes:
&gt;<i> Hi Rusty,
</I>&gt;<i>
</I>&gt;&gt;<i> 5) Unknown protobuf fields are handled in the protocol as follows
</I>&gt;&gt;<i>    (including in the initial Authenticate packet):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    1) Odd numbered fields are optional, and backwards compatible.
</I>&gt;&gt;<i>    2) Even numbered fields are required; abort if you get one.
</I>&gt;<i>
</I>&gt;<i> I don't get it, what is it about ?
</I>
Yes, I really need to write this up in Matsjj's lightning-core docs
repository.

Since protobuf fields are explicitly numbered, we can use this to
deliberately break backwards compatibility in future after some
transition.

For example, if we want to add a &quot;currency identifier&quot; field in HTLC,
for non-bitcoin transactions.  That would be an even numbered field,
since you need to understand it.  (There would also need to be some way
to indicate you support those, during connection setup or something).

But if we want to add an optional new field, we'd make it odd, and
existing implementations could ignore it.

Cheers,
Rusty.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000294.html">[Lightning-dev] [PATCH v3] daemon: encrypted communication (version 3)
</A></li>
	<LI>Next message: <A HREF="000301.html">[Lightning-dev] [PATCH v3] daemon: encrypted communication (version 3)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#298">[ date ]</a>
              <a href="thread.html#298">[ thread ]</a>
              <a href="subject.html#298">[ subject ]</a>
              <a href="author.html#298">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
