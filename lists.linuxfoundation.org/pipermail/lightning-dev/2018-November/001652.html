<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Base AMP
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-November/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Base%20AMP&In-Reply-To=%3CCAFfwr8FXD9jfzXKK2M2nrGeK3GD4dQc4b1HnZQQ%2BfVA_YBonsA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001650.html">
   <LINK REL="Next"  HREF="001655.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Base AMP</H1>
    <B>Conner Fromknecht</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Base%20AMP&In-Reply-To=%3CCAFfwr8FXD9jfzXKK2M2nrGeK3GD4dQc4b1HnZQQ%2BfVA_YBonsA%40mail.gmail.com%3E"
       TITLE="[Lightning-dev] Base AMP">conner at lightning.engineering
       </A><BR>
    <I>Wed Nov 21 23:38:20 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="001650.html">[Lightning-dev] Base AMP
</A></li>
        <LI>Next message: <A HREF="001655.html">[Lightning-dev] Base AMP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1652">[ date ]</a>
              <a href="thread.html#1652">[ thread ]</a>
              <a href="subject.html#1652">[ subject ]</a>
              <a href="author.html#1652">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

&gt;<i> But it's unnecessary for the recipient to know the total amount I meant
</I>&gt;<i> to pay; they just need to return the receipt once it exceeds the amount
</I>&gt;<i> they want.
</I>
I think it&#8217;s true that the recipient doesn&#8217;t need to know necessarily, but
sending the intended amount is more robust IMO, since it provides an order
invariant hint for when the receiver can safely settle.

If the sender does amount fuzzing (as CL does) or adds a tip, it&#8217;s possible
for the final partial payment to be less than `amount_to_pay` -
`invoice_amount`, causing the sender to settle prematurely. Otherwise, we
might want to specify that no split should be less than the amount
overpaid.

Of course, if that amount never comes through yet the invoice is satisfied,
the receiver can always choose to settle even if the remaining amount never
arrives.

Cheers,
Conner

On Wed, Nov 21, 2018 at 14:55 Rusty Russell &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">rusty at rustcorp.com.au</A>&gt; wrote:

&gt;<i> Johan Tor&#229;s Halseth &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">johanth at gmail.com</A>&gt; writes:
</I>&gt;<i> &gt; Seems like we can restrict the changes to BOLT11 by having the receiver
</I>&gt;<i> &gt; assume NAMP for incoming payments &lt; invoice_amount. (with some timeout of
</I>&gt;<i> &gt; course, but that would need to be the case even when the sender is
</I>&gt;<i> &gt; signalling NAMP).
</I>&gt;<i>
</I>&gt;<i> This would effectively become a probe for Base AMP; if you get a partial
</I>&gt;<i> payment error, it's because the recipient didn't support Base AMP.
</I>&gt;<i>
</I>&gt;<i> Seems cleaner to have a flag, both on BOLT11 and inside the onion.  Then
</I>&gt;<i> it's explicitly opt-in for both sides and doesn't affect existing nodes
</I>&gt;<i> in any way.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Rusty.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Lightning-dev mailing list
</I>&gt;<i> <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">Lightning-dev at lists.linuxfoundation.org</A>
</I>&gt;<i> <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev</A>
</I>&gt;<i>
</I>-- 
&#8212;Sent from my Spaceship
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20181121/afe803d2/attachment.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20181121/afe803d2/attachment.html</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001650.html">[Lightning-dev] Base AMP
</A></li>
	<LI>Next message: <A HREF="001655.html">[Lightning-dev] Base AMP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1652">[ date ]</a>
              <a href="thread.html#1652">[ thread ]</a>
              <a href="subject.html#1652">[ subject ]</a>
              <a href="author.html#1652">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
