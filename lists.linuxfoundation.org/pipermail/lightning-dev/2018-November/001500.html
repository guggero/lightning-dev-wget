<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] BOLT11 In the World of Scriptless Scripts
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-November/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20BOLT11%20In%20the%20World%20of%20Scriptless%20Scripts&In-Reply-To=%3CfROZFg9NZkPy-TG7Tv1P6okBbOcJUQoFSt8tDTXclvbT8dwK6xZj380kiRAT0mxtpNC9sXNpq694RKjHWo3VV-AGt_iAtbZcmluCE4SdYqM%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001493.html">
   <LINK REL="Next"  HREF="001494.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] BOLT11 In the World of Scriptless Scripts</H1>
    <B>ZmnSCPxj</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20BOLT11%20In%20the%20World%20of%20Scriptless%20Scripts&In-Reply-To=%3CfROZFg9NZkPy-TG7Tv1P6okBbOcJUQoFSt8tDTXclvbT8dwK6xZj380kiRAT0mxtpNC9sXNpq694RKjHWo3VV-AGt_iAtbZcmluCE4SdYqM%3D%40protonmail.com%3E"
       TITLE="[Lightning-dev] BOLT11 In the World of Scriptless Scripts">ZmnSCPxj at protonmail.com
       </A><BR>
    <I>Sun Nov  4 09:36:58 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="001493.html">[Lightning-dev] BOLT11 In the World of Scriptless Scripts
</A></li>
        <LI>Next message: <A HREF="001494.html">[Lightning-dev] BOLT11 In the World of Scriptless Scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1500">[ date ]</a>
              <a href="thread.html#1500">[ thread ]</a>
              <a href="subject.html#1500">[ subject ]</a>
              <a href="author.html#1500">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morninh list,


Sent with ProtonMail Secure Email.

&#8208;&#8208;&#8208;&#8208;&#8208;&#8208;&#8208; Original Message &#8208;&#8208;&#8208;&#8208;&#8208;&#8208;&#8208;
On Saturday, November 3, 2018 9:37 AM, ZmnSCPxj &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">ZmnSCPxj at protonmail.com</A>&gt; wrote:

&gt;<i> Good morning Rusty, aj, and list,
</I>&gt;<i>
</I>&gt;<i> &gt; &gt; -   channel announcements: do you support secp256k1 for hashes or just
</I>&gt;<i> &gt; &gt;     sha256?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Worse, it becomes &quot;I support secp256k1 with ECDSA&quot; then a new &quot;I support
</I>&gt;<i> &gt; secp256k1 with Schnorr&quot;. You need a continuous path of channels with
</I>&gt;<i> &gt; the same feature.
</I>&gt;<i>
</I>&gt;<i> I believe not? Both the 2p-ECDSA and Schnorr contingent payment schemes effectively encode &quot;I will pay you N satoshi if you give me the private key of the public key P on the secp256k1 curve, before time B&quot;, which can be composed with another contingent payment of either 2p-ECDSA or Schnorr. So it would be possible to have a route with channels alternating between the two schemes.
</I>
Thinking a little more....

Suppose we are in possession of a zero knowledge proof, with public parameters P (a point on secp256k1) and h (a 256-bit scalar), and private parameter k (a 256-bit scalar). The proof shows (P == k * G) &amp;&amp; (h == sha256(k)).

Then suppose Alice wishes to pay Delilah some satoshis in exchange for k. However there is no channel between them. There *is* a route from Alice to Bob to Carol to Delilah. The problem is that Bob is using old software and all channels Bob has use only sha256.

In the onion packet for Carol, Alice can put &quot;the secret preimage k is known by Delilah, with the secp256k1 public key P, here's the proof (P == k * G) &amp;&amp; (h == sha256(k))&quot;. This lets us make routes that are partially in secp256k1 and partially in sha256.

However I am not enough of a mathematician to know how to generate such a proof.

And as aj points out, whether to use sha256 or secp256k1 can be done on a per-HTLC basis instead of requiring a channel start out with one or both. As long as all nodes on all viable routes understand some secp256k1 protocol,it would be possible to do AMP and decorrelation.

Regards,
ZmnSCPxj
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001493.html">[Lightning-dev] BOLT11 In the World of Scriptless Scripts
</A></li>
	<LI>Next message: <A HREF="001494.html">[Lightning-dev] BOLT11 In the World of Scriptless Scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1500">[ date ]</a>
              <a href="thread.html#1500">[ thread ]</a>
              <a href="subject.html#1500">[ subject ]</a>
              <a href="author.html#1500">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
