<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Insufficient funder balance for paying fees
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-January/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Insufficient%20funder%20balance%20for%20paying%20fees&In-Reply-To=%3C68e0ce2c-9218-4c9a-b932-27417d116c24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000948.html">
   <LINK REL="Next"  HREF="000924.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Insufficient funder balance for paying fees</H1>
    <B>Johan Tor&#229;s Halseth</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Insufficient%20funder%20balance%20for%20paying%20fees&In-Reply-To=%3C68e0ce2c-9218-4c9a-b932-27417d116c24%40gmail.com%3E"
       TITLE="[Lightning-dev] Insufficient funder balance for paying fees">johanth at gmail.com
       </A><BR>
    <I>Fri Jan 12 10:32:23 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="000948.html">[Lightning-dev] BOLTs and meaning of &quot;MUST&quot; in potentially	adversarial contexts
</A></li>
        <LI>Next message: <A HREF="000924.html">[Lightning-dev] Insufficient funder balance for paying fees
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#923">[ date ]</a>
              <a href="thread.html#923">[ thread ]</a>
              <a href="subject.html#923">[ subject ]</a>
              <a href="author.html#923">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,
I am wondering how Eclair and c-lightning is handling the following case, as I wasn&#8217;t able to derive exactly how to handle it from the BOLTs. If it is described somewhere, please point me to it, if not, let&#8217;s agree on a strategy, and get it in :)
Let's say Alice is the funder of the channel (meaning she is paying all fees) between Alice and Bob. She wants to add an HTLC, and has just enough balance available for the HTLC + the extra fee for adding it to the commitment transaction. At the same time Bob wants to add an HTLC, and sees that Alice has enough balance to be able to pay the fee for receiving this HTLC (add it to her commitment tx).
They both send the AddHTLC at the same time, thinking Alice has enough balance available, but she doesn't have enough to cover her own HTLC+fee, in addition to the fee for adding Bob's. Adding both the HTLCs to her commitment transaction will either 1) violate the channel reserve requirement, or 2) deplete her channel completely if the channel reserve is set to 0.
What is the expected way of handling this case, from both Alice and Bob&#8217;s point of view?
Cheers, Johan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20180112/8844551f/attachment.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20180112/8844551f/attachment.html</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000948.html">[Lightning-dev] BOLTs and meaning of &quot;MUST&quot; in potentially	adversarial contexts
</A></li>
	<LI>Next message: <A HREF="000924.html">[Lightning-dev] Insufficient funder balance for paying fees
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#923">[ date ]</a>
              <a href="thread.html#923">[ thread ]</a>
              <a href="subject.html#923">[ subject ]</a>
              <a href="author.html#923">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
