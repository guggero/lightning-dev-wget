<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Data piggybacking within the payment_preimage	for offline payments in wallets
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-December/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Data%20piggybacking%20within%20the%20payment_preimage%0A%09for%20offline%20payments%20in%20wallets&In-Reply-To=%3CQvpcn0TTpkOlNVmU556ENEn_hLIKCfZuNiHeyh3v_P4PXSvUrWn7z0hxQtWUs4LijWB6CXTNqLECeKM1da3iohVsgkgYeaFz8_jL_ncZ9e4%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001749.html">
   <LINK REL="Next"  HREF="001751.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Data piggybacking within the payment_preimage	for offline payments in wallets</H1>
    <B>ZmnSCPxj</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Data%20piggybacking%20within%20the%20payment_preimage%0A%09for%20offline%20payments%20in%20wallets&In-Reply-To=%3CQvpcn0TTpkOlNVmU556ENEn_hLIKCfZuNiHeyh3v_P4PXSvUrWn7z0hxQtWUs4LijWB6CXTNqLECeKM1da3iohVsgkgYeaFz8_jL_ncZ9e4%3D%40protonmail.com%3E"
       TITLE="[Lightning-dev] Data piggybacking within the payment_preimage	for offline payments in wallets">ZmnSCPxj at protonmail.com
       </A><BR>
    <I>Sat Dec 22 14:38:21 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="001749.html">[Lightning-dev] Data piggybacking within the payment_preimage for offline payments in wallets
</A></li>
        <LI>Next message: <A HREF="001751.html">[Lightning-dev] visual identification of payee node id
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1750">[ date ]</a>
              <a href="thread.html#1750">[ thread ]</a>
              <a href="subject.html#1750">[ subject ]</a>
              <a href="author.html#1750">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning Jose,

&gt;<i>
</I>&gt;<i> I wish they could ;-)
</I>&gt;<i> Not all machines sell products. Some sell services: Arcade machines, Toll booths, etc., are examples of machines that provide a service instead of a physical product, where not having to replentish invoices ever is desirable.
</I>
I imagine even a cheap EEPROM can contain several hundred thousand invoices.
And you will want to regularly do checkups on your machines anyway, so you might as well replenish invoices at each checkup.

&gt;<i> &gt; While your technician is replenishing the machine and doing whatever basic checks, your technician also replaces a EEPROM board with a new EEPROM board with fresh invoices.
</I>&gt;<i>
</I>&gt;<i> True, but -in my experience at least- the person that replenishes the machine isn't usually a technician.
</I>
Whatever you may call them.
They open the machine, they put things in it.
Adding an instruction &quot;remove this thing from the slot, then replace with this thing, press this internal button to see if it got inserted properly&quot; is not so hard.

&gt;<i> &gt; Will be fixed by payment decorrelation when we move to points and scalars.
</I>&gt;<i> &gt; This will require either using `OP_CODESEPARATOR`, which is hard to understand, or waiting for Schnorr.
</I>&gt;<i>
</I>&gt;<i> Wasn't aware of that, good to know. Are hash preimages dissapearing then?
</I>
Yes, in A Few Years (hint: longer than you think).

Moving to points and scalars would let us use hierarchical derivation, where the offline machine would contain only the root pubkey (point), while the online Lightning node would contain the root privkey (scalar).
This would not require any storage of invoices in the offline machine.

Regards,
ZmnSCPxj
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001749.html">[Lightning-dev] Data piggybacking within the payment_preimage for offline payments in wallets
</A></li>
	<LI>Next message: <A HREF="001751.html">[Lightning-dev] visual identification of payee node id
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1750">[ date ]</a>
              <a href="thread.html#1750">[ thread ]</a>
              <a href="subject.html#1750">[ subject ]</a>
              <a href="author.html#1750">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
