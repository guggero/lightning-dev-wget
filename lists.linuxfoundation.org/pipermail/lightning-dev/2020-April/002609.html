<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] A better encoding for lightning invoices
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-April/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20A%20better%20encoding%20for%20lightning%20invoices&In-Reply-To=%3CCACdvm3PuVWJUcDC%2BPsHxL-w4rh0%2BWd8kqBhVK%3D3BYK-kiabMjg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002635.html">
   <LINK REL="Next"  HREF="002612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] A better encoding for lightning invoices</H1>
    <B>Bastien TEINTURIER</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20A%20better%20encoding%20for%20lightning%20invoices&In-Reply-To=%3CCACdvm3PuVWJUcDC%2BPsHxL-w4rh0%2BWd8kqBhVK%3D3BYK-kiabMjg%40mail.gmail.com%3E"
       TITLE="[Lightning-dev] A better encoding for lightning invoices">bastien at acinq.fr
       </A><BR>
    <I>Wed Apr  1 07:59:00 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="002635.html">[Lightning-dev] Proof-of-closure as griefing attack mitigation
</A></li>
        <LI>Next message: <A HREF="002612.html">[Lightning-dev] A better encoding for lightning invoices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2609">[ date ]</a>
              <a href="thread.html#2609">[ thread ]</a>
              <a href="subject.html#2609">[ subject ]</a>
              <a href="author.html#2609">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning list,

In Bolt 11 we decided to use bech32 to encode lightning invoices.
While bech32 has some nice properties, it isn't well suited for invoices.
The main drawback of Bolt 11 invoices is their size: when you start adding
routing hints or rendezvous onions, invoices become huge and hard to share.

Empirical evidence shows that most lightning transactions are done over
Twitter
(73,41% of all lightning payments in 2019 were made via tweets).
Since Twitter only allows up to 280 characters per tweet, this has severely
impacted
the development of new features for lightning. Anything that made an
invoice bigger
ended up being unused as users were left without any option to share those
invoices.

After several months of research and experimentation at Acinq Research, we
have come
up with a highly efficient invoice encoding, optimized primarily for
Twitter. This has
caused further delays in the development of our iOS wallet, but we felt
this was a
much higher priority.

Our encoding uses an AI-optimized mapping from 11-bit words to Twitter
emojis.
Early results show that emoji invoices are more than 2 times smaller than
legacy invoices.

Reckless users are already using this in production:

<A HREF="https://twitter.com/realtbast/status/1245258812279398400?s=20">https://twitter.com/realtbast/status/1245258812279398400?s=20</A>
<A HREF="https://twitter.com/acinq_co/status/1245258815597096960">https://twitter.com/acinq_co/status/1245258815597096960</A>

There is a spec PR available at [1], along with reference eclair code [2].
We plan to release this feature in the next update of our Phoenix wallet
[3].

We'd like feedback from this list on how to improve this further. We
believe the
same encoding could be used to compress the bitcoin blockchain. With more
training
data, we believe our AI-optimized mapping could allow bitcoin blocks to fit
in a
single tweet; we would then be able to use Twitter feeds to store the whole
blockchain.

Cheers,
Bastien

[1] <A HREF="https://github.com/lightningnetwork/lightning-rfc/pull/762">https://github.com/lightningnetwork/lightning-rfc/pull/762</A>
[2] <A HREF="https://github.com/ACINQ/eclair/tree/emoji-encoding">https://github.com/ACINQ/eclair/tree/emoji-encoding</A>
[3] <A HREF="https://phoenix.acinq.co/">https://phoenix.acinq.co/</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20200401/57b78392/attachment-0001.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20200401/57b78392/attachment-0001.html</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002635.html">[Lightning-dev] Proof-of-closure as griefing attack mitigation
</A></li>
	<LI>Next message: <A HREF="002612.html">[Lightning-dev] A better encoding for lightning invoices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2609">[ date ]</a>
              <a href="thread.html#2609">[ thread ]</a>
              <a href="subject.html#2609">[ subject ]</a>
              <a href="author.html#2609">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
