<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] asynchronous Lightning network payments
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-October/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20asynchronous%20Lightning%20network%20payments&In-Reply-To=%3CCAHoOKgJMqVUH%2B2Ejix3wcS73WdEVjeP3e59pXM4AynHBojPTwA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002260.html">
   <LINK REL="Next"  HREF="002265.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] asynchronous Lightning network payments</H1>
    <B>Konstantin Ketterer</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20asynchronous%20Lightning%20network%20payments&In-Reply-To=%3CCAHoOKgJMqVUH%2B2Ejix3wcS73WdEVjeP3e59pXM4AynHBojPTwA%40mail.gmail.com%3E"
       TITLE="[Lightning-dev] asynchronous Lightning network payments">ketterer.konstantin at gmail.com
       </A><BR>
    <I>Wed Oct 30 12:39:31 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="002260.html">[Lightning-dev] asynchronous Lightning network payments
</A></li>
        <LI>Next message: <A HREF="002265.html">[Lightning-dev] asynchronous Lightning network payments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2263">[ date ]</a>
              <a href="thread.html#2263">[ thread ]</a>
              <a href="subject.html#2263">[ subject ]</a>
              <a href="author.html#2263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi ZmnSCPxj,

How does S learn that B has come online?
&gt;<i>
</I>&gt;<i> Presumably there is some kind of polling involved.
</I>&gt;<i> What do you imagine the polling rate to be?
</I>&gt;<i> One block?
</I>&gt;<i> 100 blocks?
</I>&gt;<i> One difficulty adjustment?
</I>&gt;<i> One halving period?
</I>&gt;<i>
</I>
I imagined that A somehow send the IP address of S or any information to
contact S alongside the transaction and then B would connect to S and
request the payment. If it had to be a polling rate I would choose
something like 6 blocks.


&gt;<i> &gt; #### Locked up capital
</I>&gt;<i> &gt; While B hasn't yet claimed its money, the funds in the channel between A
</I>&gt;<i> and S are essentially locked up. However, A and S could simply overwrite
</I>&gt;<i> the payment (new update + settlement transaction), then A could send
</I>&gt;<i> multiple payments with the remaining balance and before going offline A
</I>&gt;<i> would do the procedure again. If A has sufficient inbound capacity in other
</I>&gt;<i> channels it can also re-balance its channel A-S so that the outbound
</I>&gt;<i> capacity - (amt + fees) in this channel is zero and then do the procedure.
</I>&gt;<i>
</I>&gt;<i> An issue is when the channel is forced onchain by either A or S.
</I>&gt;<i> For example, what if S is attacked by an army of shiny robots which
</I>&gt;<i> destroys the keys of S?
</I>&gt;<i> (Disclaimer: I do not control, nor have I ever controlled, an army of
</I>&gt;<i> shiny robots to take over the world.
</I>&gt;<i> Shininess does not increase combat capability, thus not useful property of
</I>&gt;<i> robots to have.)
</I>&gt;<i> Obviously S can no longer participate in the channel update, thus A *must*
</I>&gt;<i> force the channel onchain and execute the contract there.
</I>&gt;<i>
</I>&gt;<i> Thus, the UTXO for this should be claimable in both a secret-revelation
</I>&gt;<i> path and a timeout path, both enforceable onchain, else S could hold the
</I>&gt;<i> funds hostage by threatening unilateral close of the channel.
</I>&gt;<i> i.e. you still need a PTLC for this.
</I>&gt;<i>
</I>
I don't think I understand what you are trying to say. Because we are using
eltoo A can at any point in time publish the trigger transaction, the
previous update transaction and the  corresponding settlement transaction
without any repercussions and recover its money after some amount of time.
This essentially allows A to cancel the payment to B until B has claimed
the payment from S. Because if S has already paid B and has not lost its
keys ( or already signed the new update transaction beforehand) it can
double spend the older settlement transaction from A with its newer update
and settlement transaction. All in all, A can still force the channel to
settle on chain even if S does not cooperate anymore and doesn't tell A
about the new update + settlement transaction.

Regards
Konstantin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20191030/3c07d8bb/attachment.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20191030/3c07d8bb/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002260.html">[Lightning-dev] asynchronous Lightning network payments
</A></li>
	<LI>Next message: <A HREF="002265.html">[Lightning-dev] asynchronous Lightning network payments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2263">[ date ]</a>
              <a href="thread.html#2263">[ thread ]</a>
              <a href="subject.html#2263">[ subject ]</a>
              <a href="author.html#2263">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
