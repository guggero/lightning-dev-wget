<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in Contracting Applications (eg Lightning)
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-October/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20CPFP%20Carve-Out%20for%20Fee-Prediction%20Issues%20in%0A%20Contracting%20Applications%20%28eg%20Lightning%29&In-Reply-To=%3CCAD3i26BkuxMyazGsQ1%2Bij25f3xhXUBpUTcOfgYKnY4fur5rGBw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002256.html">
   <LINK REL="Next"  HREF="002252.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in Contracting Applications (eg Lightning)</H1>
    <B>Johan Tor&#229;s Halseth</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20CPFP%20Carve-Out%20for%20Fee-Prediction%20Issues%20in%0A%20Contracting%20Applications%20%28eg%20Lightning%29&In-Reply-To=%3CCAD3i26BkuxMyazGsQ1%2Bij25f3xhXUBpUTcOfgYKnY4fur5rGBw%40mail.gmail.com%3E"
       TITLE="[Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in Contracting Applications (eg Lightning)">johanth at gmail.com
       </A><BR>
    <I>Wed Oct 30 07:22:53 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="002256.html">[Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in Contracting Applications (eg Lightning)
</A></li>
        <LI>Next message: <A HREF="002252.html">[Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in Contracting Applications (eg Lightning)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2261">[ date ]</a>
              <a href="thread.html#2261">[ thread ]</a>
              <a href="subject.html#2261">[ subject ]</a>
              <a href="author.html#2261">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Oct 28, 2019 at 6:16 PM David A. Harding &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">dave at dtrt.org</A>&gt; wrote:

&gt;<i> A parent transaction near the limit of 100,000 vbytes could have almost
</I>&gt;<i> 10,000 outputs paying OP_TRUE (10 vbytes per output).  If the children
</I>&gt;<i> were limited to 10,000 vbytes each (the current max carve-out size),
</I>&gt;<i> that allows relaying 100 mega-vbytes or nearly 400 MB data size (larger
</I>&gt;<i> than the default maximum mempool size in Bitcoin Core).
</I>&gt;<i>
</I>
Thanks, Dave, I wasn't aware the limits would allow this many outputs. And
as your calculation shows, this opens up the potential for free relay of
large amounts of data.

We could start special casing to only allow this for &quot;LN commitment-like&quot;
transactions, but this would be application specific changes, and your
calculation shows that even with the BOLT2 numbers there still exists cases
with a large number of children.

We are moving forward with adding a 1 block delay to all outputs to utilize
the current carve-out rule, and the changes aren't that bad. See Joost's
post in &quot;[PATCH] First draft of option_simplfied_commitment&quot;

- Johan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20191030/bc2a90f3/attachment.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20191030/bc2a90f3/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002256.html">[Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in Contracting Applications (eg Lightning)
</A></li>
	<LI>Next message: <A HREF="002252.html">[Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in Contracting Applications (eg Lightning)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2261">[ date ]</a>
              <a href="thread.html#2261">[ thread ]</a>
              <a href="subject.html#2261">[ subject ]</a>
              <a href="author.html#2261">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
