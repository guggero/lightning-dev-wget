<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] [bitcoin-dev] Continuing the discussion about	noinput / anyprevout
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-October/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20%5Bbitcoin-dev%5D%20Continuing%20the%20discussion%20about%0A%09noinput%20/%20anyprevout&In-Reply-To=%3C87r23w7d9c.fsf%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002197.html">
   <LINK REL="Next"  HREF="002185.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] [bitcoin-dev] Continuing the discussion about	noinput / anyprevout</H1>
    <B>Christian Decker</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20%5Bbitcoin-dev%5D%20Continuing%20the%20discussion%20about%0A%09noinput%20/%20anyprevout&In-Reply-To=%3C87r23w7d9c.fsf%40gmail.com%3E"
       TITLE="[Lightning-dev] [bitcoin-dev] Continuing the discussion about	noinput / anyprevout">decker.christian at gmail.com
       </A><BR>
    <I>Tue Oct  1 14:26:39 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="002197.html">[Lightning-dev] [bitcoin-dev] Continuing the discussion about	noinput / anyprevout
</A></li>
        <LI>Next message: <A HREF="002185.html">[Lightning-dev] [bitcoin-dev] Continuing the discussion about noinput / anyprevout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2183">[ date ]</a>
              <a href="thread.html#2183">[ thread ]</a>
              <a href="subject.html#2183">[ subject ]</a>
              <a href="author.html#2183">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>ZmnSCPxj &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">ZmnSCPxj at protonmail.com</A>&gt; writes:
&gt;<i> To elucidate further ---
</I>&gt;<i>
</I>&gt;<i> Suppose rather than `SIGHASH_NOINPUT`, we created a new opcode,
</I>&gt;<i> `OP_CHECKSIG_WITHOUT_INPUT`.
</I>&gt;<i>
</I>&gt;<i> This new opcode ignores any `SIGHASH` flags, if present, on a
</I>&gt;<i> signature, but instead hashes the current transaction without the
</I>&gt;<i> input references, then checks that hash to the signature.
</I>&gt;<i>
</I>&gt;<i> This is equivalent to `SIGHASH_NOINPUT`.
</I>&gt;<i>
</I>&gt;<i> Yet as an opcode, it would be possible to embed in a Taproot script.
</I>&gt;<i>
</I>&gt;<i> For example, a Decker-Russell-Osuntokun would have an internal Taproot
</I>&gt;<i> point be a 2-of-2, then have a script `OP_1
</I>&gt;<i> OP_CHECKSIG_WITHOUT_INPUT`.  Unilateral closes would expose the hidden
</I>&gt;<i> script, but cooperative closes would use the 2-of-2 directly.
</I>&gt;<i>
</I>&gt;<i> Of note, is that any special SCRIPT would already be supportable by Taproot.
</I>&gt;<i> This includes SCRIPTs that may potentially lose funds for the user.
</I>&gt;<i> Yet such SCRIPTs are already targetable by a Taproot address.
</I>&gt;<i>
</I>&gt;<i> If we are so concerned about `SIGHASH_NOINPUT` abuse, why are we not
</I>&gt;<i> so concerned about Taproot abuse?
</I>
That would certainly be another possibility, which I have not explored
in detail so far. Due to the similarity between the various signature
checking op-codes it felt that it should be a sighash flag, and it
neatly slotted into the already existing flags. If we go for a separate
opcode we might end up reinventing the wheel, and to be honest I feared
that proposing a new opcode would get us into bikeshedding territory
(which I apparently failed to avoid with the sighash flag anyway...).

The advantage would be that with the sighash flag the spender is in
charge of specifying the flags, whereas with an opcode the output
dictates the signature verification modalities. The downside is the
increased design space.

What do others think? Would this be an acceptable opt-in mechanism that
addresses the main concerns?

Cheers,
Christian
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002197.html">[Lightning-dev] [bitcoin-dev] Continuing the discussion about	noinput / anyprevout
</A></li>
	<LI>Next message: <A HREF="002185.html">[Lightning-dev] [bitcoin-dev] Continuing the discussion about noinput / anyprevout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2183">[ date ]</a>
              <a href="thread.html#2183">[ thread ]</a>
              <a href="subject.html#2183">[ subject ]</a>
              <a href="author.html#2183">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
