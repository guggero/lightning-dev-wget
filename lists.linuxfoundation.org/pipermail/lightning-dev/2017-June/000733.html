<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] [RFC] Lightning invoice/payment format draft
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2017-June/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20%5BRFC%5D%20Lightning%20invoice/payment%20format%20draft&In-Reply-To=%3CLgBEZTIwZietTZKmz1eNigHGsoFPyrPFmGjxfpYuYqktbwXo6doj_Wfbsb9OGQ5VY1s-eTcBtJQ-qRUxTyRvZD3SPA2LkXbsVsZQ0xUiork%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000732.html">
   <LINK REL="Next"  HREF="000734.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] [RFC] Lightning invoice/payment format draft</H1>
    <B>ZmnSCPxj</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20%5BRFC%5D%20Lightning%20invoice/payment%20format%20draft&In-Reply-To=%3CLgBEZTIwZietTZKmz1eNigHGsoFPyrPFmGjxfpYuYqktbwXo6doj_Wfbsb9OGQ5VY1s-eTcBtJQ-qRUxTyRvZD3SPA2LkXbsVsZQ0xUiork%3D%40protonmail.com%3E"
       TITLE="[Lightning-dev] [RFC] Lightning invoice/payment format draft">ZmnSCPxj at protonmail.com
       </A><BR>
    <I>Thu Jun  1 03:42:21 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="000732.html">[Lightning-dev] [RFC] Lightning invoice/payment format draft
</A></li>
        <LI>Next message: <A HREF="000734.html">[Lightning-dev] [RFC] Lightning invoice/payment format draft
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#733">[ date ]</a>
              <a href="thread.html#733">[ thread ]</a>
              <a href="subject.html#733">[ subject ]</a>
              <a href="author.html#733">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning Rusty,

The fact that amount is optional, and the separator character between human-readable and data is the character &quot;1&quot;, may mean some trouble with parsing of the optional amount.

Currently, the version is 0, which translates to the character &quot;q&quot; appearing after &quot;1&quot;. So 1q is obviously not an amount and is known to start the data part.

However, what happens when we decide to upgrade, and version is now 1, translating to character &quot;p&quot;?

If version 1 of invoice is avalialble, does a payment starting with lnbc1p .... indicate a 1 pico-bitcoin payment, or an arbitrary payment to a version-1 data part?

Or is amount not allowed to have character &quot;1&quot;? It seems a strange limitation if we impose this...

Or do I mistake my understanding of bech32?

Alternatively we can just fix the first 5 bits to be 0 (so &quot;1q&quot; is an unambiguous separator between human-readable and data parts) and provide the version by other means, such as changing lnbc to ln2bc or so on...

&gt;<i> simply reused here even though its 6-character checksum is optimized
</I>&gt;<i> for human errors, which are unlikely given the length of lightning
</I>&gt;<i> invoices.
</I>
At first read, this seems wrong. My understanding is that lightning invoices are longer than segwit addresses in bech32, so human error is more likely.

Of course, it seems that the intended meaning is really &quot;lightning invoices are so long that it is unlikely humans will enter it by hand, so human errors are unlikely compared to QR reader errors etc.&quot; so perhaps better reworded as such.

Regards,
ZmnSCPxj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20170531/80a1f0d2/attachment.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20170531/80a1f0d2/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000732.html">[Lightning-dev] [RFC] Lightning invoice/payment format draft
</A></li>
	<LI>Next message: <A HREF="000734.html">[Lightning-dev] [RFC] Lightning invoice/payment format draft
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#733">[ date ]</a>
              <a href="thread.html#733">[ thread ]</a>
              <a href="subject.html#733">[ subject ]</a>
              <a href="author.html#733">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
