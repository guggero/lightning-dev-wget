<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Probing final receiver with refund timeout
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-March/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Probing%20final%20receiver%20with%20refund%20timeout&In-Reply-To=%3C56DFF1A3.5030008%40blockchain.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000481.html">
   <LINK REL="Next"  HREF="000490.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Probing final receiver with refund timeout</H1>
    <B>Mats Jerratsch</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Probing%20final%20receiver%20with%20refund%20timeout&In-Reply-To=%3C56DFF1A3.5030008%40blockchain.com%3E"
       TITLE="[Lightning-dev] Probing final receiver with refund timeout">mats at blockchain.com
       </A><BR>
    <I>Wed Mar  9 09:49:23 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="000481.html">[Lightning-dev] Probing final receiver with refund timeout
</A></li>
        <LI>Next message: <A HREF="000490.html">[Lightning-dev] Probing final receiver with refund timeout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#484">[ date ]</a>
              <a href="thread.html#484">[ thread ]</a>
              <a href="subject.html#484">[ subject ]</a>
              <a href="author.html#484">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> If A sends many HTLCs through B, B can simply plot what the timeouts
</I>&gt;<i> are and know that A is likely originating the HTLCs rather than relaying
</I>&gt;<i> them for someone else.
</I>
Hm, right. If all payments that come from A have a timeout larger than
some minimum value X, he is generating all of them and is just trying to
randomize those. However, if he creates a payment with an initial refund
value lower than X, the payment might not succeed, because the
intermediate nodes deducted too much.

However, if we take into account that the amount of nodes in the route
is not a constant, and only known to the sender, this adds another
degree of freedom to choose the initial value.


&gt;&gt;<i> However, I am inclined to use those timestamps in the onion object, as
</I>&gt;&gt;<i> the described attackvector still exists.
</I>&gt;<i> 
</I>&gt;<i> Doesn't including timestamps in the onion provide explicit information
</I>&gt;<i> on the number of previous hops though?
</I>
Not if they are randomized. The initial sender will choose a good
starting value (see above), and deduct MIN_TIMEOUT * MIN_OVERLAY *
RANDOM from it. Actually it doesn't provide any additional data, as that
is the very same mechanism the intermediate hops come to that value.

-- 
Mats Jerratsch
Backend Engineer, Blockchain
e: <A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">mats at blockchain.com</A>
PGP: <A HREF="https://pgp.mit.edu/pks/lookup?op=get&amp;search=0x7F3EC6CA">https://pgp.mit.edu/pks/lookup?op=get&amp;search=0x7F3EC6CA</A>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 842 bytes
Desc: OpenPGP digital signature
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20160309/d067aae0/attachment.sig">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20160309/d067aae0/attachment.sig</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000481.html">[Lightning-dev] Probing final receiver with refund timeout
</A></li>
	<LI>Next message: <A HREF="000490.html">[Lightning-dev] Probing final receiver with refund timeout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#484">[ date ]</a>
              <a href="thread.html#484">[ thread ]</a>
              <a href="subject.html#484">[ subject ]</a>
              <a href="author.html#484">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
