<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Probing final receiver with refund timeout
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-March/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Probing%20final%20receiver%20with%20refund%20timeout&In-Reply-To=%3C8737s5mfy3.fsf%40rustcorp.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000452.html">
   <LINK REL="Next"  HREF="000472.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Probing final receiver with refund timeout</H1>
    <B>Rusty Russell</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Probing%20final%20receiver%20with%20refund%20timeout&In-Reply-To=%3C8737s5mfy3.fsf%40rustcorp.com.au%3E"
       TITLE="[Lightning-dev] Probing final receiver with refund timeout">rusty at rustcorp.com.au
       </A><BR>
    <I>Sat Mar  5 09:28:36 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="000452.html">[Lightning-dev] Probing final receiver with refund timeout
</A></li>
        <LI>Next message: <A HREF="000472.html">[Lightning-dev] Probing final receiver with refund timeout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#454">[ date ]</a>
              <a href="thread.html#454">[ thread ]</a>
              <a href="subject.html#454">[ subject ]</a>
              <a href="author.html#454">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mats Jerratsch via Lightning-dev
&lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">lightning-dev at lists.linuxfoundation.org</A>&gt; writes:
&gt;<i> Just discovered that it is possible to attack the onion routing with
</I>&gt;<i> probing too short of an absolute CLTV refund timeout.
</I>&gt;<i>
</I>&gt;<i> When accepting a payment, one will check if the remaining timeout &gt;
</I>&gt;<i> MIN_TIMEOUT.
</I>
One mitigation for this particular attack would be to remember the onion
and always fail an identical one.  That would allow a single probe,
however (basically, &quot;are you the final destination?&quot;).

Also the timeout for the next hop should probably be somewhat
randomized, at least subtracting (MIN_TIMEOUT to MIN_TIMEOUT*2).

The question remains as to what HTLC timeout should be set to initially.
Even if you randomize it, over time the pattern would reveal to your
peer if you are originating all the HTLCS, for example.

Cheers,
Rusty.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000452.html">[Lightning-dev] Probing final receiver with refund timeout
</A></li>
	<LI>Next message: <A HREF="000472.html">[Lightning-dev] Probing final receiver with refund timeout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#454">[ date ]</a>
              <a href="thread.html#454">[ thread ]</a>
              <a href="subject.html#454">[ subject ]</a>
              <a href="author.html#454">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
