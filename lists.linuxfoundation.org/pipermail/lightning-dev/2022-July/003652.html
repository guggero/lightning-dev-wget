<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] Onion messages rate-limiting
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2022-July/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Onion%20messages%20rate-limiting&In-Reply-To=%3CCAO3Pvs8rhrK_SdwNs_YOPsFtcU1T_yve%2BPJLW8aWY9LKk%2Bg9hw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003651.html">
   <LINK REL="Next"  HREF="003653.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] Onion messages rate-limiting</H1>
    <B>Olaoluwa Osuntokun</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20Onion%20messages%20rate-limiting&In-Reply-To=%3CCAO3Pvs8rhrK_SdwNs_YOPsFtcU1T_yve%2BPJLW8aWY9LKk%2Bg9hw%40mail.gmail.com%3E"
       TITLE="[Lightning-dev] Onion messages rate-limiting">laolu32 at gmail.com
       </A><BR>
    <I>Sat Jul  2 00:48:32 UTC 2022</I>
    <P><UL>
        <LI>Previous message: <A HREF="003651.html">[Lightning-dev] Achieving Zero Downtime Splicing in Practice via Chain Signals
</A></li>
        <LI>Next message: <A HREF="003653.html">[Lightning-dev] Onion messages rate-limiting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3652">[ date ]</a>
              <a href="thread.html#3652">[ thread ]</a>
              <a href="subject.html#3652">[ subject ]</a>
              <a href="author.html#3652">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Val,

&gt;<i> Another huge win of backpressure is that it only needs to happen in DoS
</I>&gt;<i> situations, meaning it doesn&#8217;t have to impact users in the normal case.
</I>
I agree, I think the same would apply to prepayments as well (0 or 1 msat in
calm times). My main concern with relying _only_ on backpressure rate
limiting is that we'd end up w/ your first scenario more often than not,
which means routine (and more important to the network) things like fetching
invoices becomes unreliable.

I'm not saying we should 100% compare onion messages to Tor, but that we
might
be able to learn from what works and what isn't working for them. The
systems
aren't identical, but have some similarities.

On the topic of parameters across the network: could we end up in a scenario
where someone is doing like streaming payments for a live stream (or w/e),
ends up fetching a ton of invoices (actual traffic leading to payments), but
then ends up being erroneously rate limited by their peers? Assuming they
have 1 or 2 channels that have now all been clamped down, is waiting N
minutes (or w/e) their only option? If so then this might lead to their
livestream (data being transmitted elsewhere) being shut off. Oops, they
just
missed the greatest World Cup goal in history!  You had to be there, you
had to
be there, you had to *be* there...

Another question on my mind is: if this works really well for rate limiting
of
onion messages, then why can't we use it for HTLCs as well?

-- Laolu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20220701/bb864893/attachment.html">http://lists.linuxfoundation.org/pipermail/lightning-dev/attachments/20220701/bb864893/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003651.html">[Lightning-dev] Achieving Zero Downtime Splicing in Practice via Chain Signals
</A></li>
	<LI>Next message: <A HREF="003653.html">[Lightning-dev] Onion messages rate-limiting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3652">[ date ]</a>
              <a href="thread.html#3652">[ thread ]</a>
              <a href="subject.html#3652">[ subject ]</a>
              <a href="author.html#3652">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
