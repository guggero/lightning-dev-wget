<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] A state machine.
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2015-September/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20A%20state%20machine.&In-Reply-To=%3C87fv2un3va.fsf%40rustcorp.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000181.html">
   <LINK REL="Next"  HREF="000203.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] A state machine.</H1>
    <B>Rusty Russell</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20A%20state%20machine.&In-Reply-To=%3C87fv2un3va.fsf%40rustcorp.com.au%3E"
       TITLE="[Lightning-dev] A state machine.">rusty at rustcorp.com.au
       </A><BR>
    <I>Fri Sep  4 05:35:37 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000181.html">[Lightning-dev] A state machine.
</A></li>
        <LI>Next message: <A HREF="000203.html">[Lightning-dev] Standardization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#183">[ date ]</a>
              <a href="thread.html#183">[ thread ]</a>
              <a href="subject.html#183">[ subject ]</a>
              <a href="author.html#183">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jasper Hugunin &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">jasper at hashplex.com</A>&gt; writes:
&gt;<i> I had an idea regarding an alternative to the high/low priority. My
</I>&gt;<i> understanding is that the problem is this case:
</I>&gt;<i> Alice sends PKT_UPDATE and transitions to WAIT_FOR_UPDATE_ACCEPT.
</I>&gt;<i> Bob sends PKT_UPDATE, and also transitions to WAIT_FOR_UPDATE_ACCEPT.
</I>&gt;<i> Then Bob receives Alice's PKT_UPDATE. Since he is waiting for his own
</I>&gt;<i> update, he doesn't know which *single* update is the official one. Same for
</I>&gt;<i> Alice.
</I>&gt;<i>
</I>&gt;<i> What if Bob and Alice agree on a new update that combines both updates. The
</I>&gt;<i> protocol can only handle one update at a time, but the update doesn't have
</I>&gt;<i> to happen one-way.
</I>
We could, but it makes things more complex.

We might eventually want to batch updates for performance (which we
certainly can do), which would also solve this problem.

The duplicated state is really an artifact of the artificial and
exhaustive way I coded state.c.  I did that because I wanted as much
state to be expressed in the &quot;enum state&quot; for simpler testing.

In practice, it's a one-liner.

Cheers,
Rusty.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000181.html">[Lightning-dev] A state machine.
</A></li>
	<LI>Next message: <A HREF="000203.html">[Lightning-dev] Standardization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#183">[ date ]</a>
              <a href="thread.html#183">[ thread ]</a>
              <a href="subject.html#183">[ subject ]</a>
              <a href="author.html#183">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
