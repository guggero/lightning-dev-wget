<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in	Contracting Applications (eg Lightning)
   </TITLE>
   <LINK REL="Index" HREF="https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-January/index.html" >
   <LINK REL="made" HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20CPFP%20Carve-Out%20for%20Fee-Prediction%20Issues%20in%0A%09Contracting%20Applications%20%28eg%20Lightning%29&In-Reply-To=%3C87wonfem03.fsf%40rustcorp.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001801.html">
   <LINK REL="Next"  HREF="001809.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in	Contracting Applications (eg Lightning)</H1>
    <B>Rusty Russell</B> 
    <A HREF="mailto:lightning-dev%40lists.linuxfoundation.org?Subject=Re:%20Re%3A%20%5BLightning-dev%5D%20CPFP%20Carve-Out%20for%20Fee-Prediction%20Issues%20in%0A%09Contracting%20Applications%20%28eg%20Lightning%29&In-Reply-To=%3C87wonfem03.fsf%40rustcorp.com.au%3E"
       TITLE="[Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in	Contracting Applications (eg Lightning)">rusty at rustcorp.com.au
       </A><BR>
    <I>Tue Jan  8 05:50:20 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="001801.html">[Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in Contracting Applications (eg Lightning)
</A></li>
        <LI>Next message: <A HREF="001809.html">[Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in	Contracting Applications (eg Lightning)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1805">[ date ]</a>
              <a href="thread.html#1805">[ thread ]</a>
              <a href="subject.html#1805">[ subject ]</a>
              <a href="author.html#1805">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matt Corallo &lt;<A HREF="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">lf-lists at mattcorallo.com</A>&gt; writes:
&gt;<i> Ultimately, defining a &quot;near the top of the mempool&quot; criteria is fraught 
</I>&gt;<i> with issues. While it's probably OK for the original problem (large 
</I>&gt;<i> batched transactions where you don't want a single counterparty to 
</I>&gt;<i> prevent confirmation), lightning's requirements are very different. 
</I>&gt;<i> Instead is wanting a high probability that the transaction in question 
</I>&gt;<i> confirms &quot;soon&quot;, we need certainty that it will confirm by some deadline.
</I>
I don't think it's different, in practice.

&gt;<i> Thus, even if you imagine a steady-state mempool growth, unless the 
</I>&gt;<i> &quot;near the top of the mempool&quot; criteria is &quot;near the top of the next 
</I>&gt;<i> block&quot; (which is obviously *not* incentive-compatible)
</I>
I was defining &quot;top of mempool&quot; as &quot;in the first 4 MSipa&quot;, ie. next
block, and assumed you'd only allow RBF if the old package wasn't in the
top and the replacement would be.  That seems incentive compatible; more
than the current scheme?

The attack against this is to make a 100k package which would just get
into this &quot;top&quot;, then push it out with a separate tx at slightly higher
fee, then repeat.  Of course, timing makes that hard to get right, and
you're paying real fees for it too.

Sure, an attacker can make you pay next-block high fees, but it's still
better than our current &quot;*always* overpay and hope!&quot;, and you can always
decide at the time based on whether the expiring HTLC(s) are worth it.

But I think whatever's simplest to implement should win, and I'm not in
a position to judge that accurately.

Thanks,
Rusty.
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001801.html">[Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in Contracting Applications (eg Lightning)
</A></li>
	<LI>Next message: <A HREF="001809.html">[Lightning-dev] CPFP Carve-Out for Fee-Prediction Issues in	Contracting Applications (eg Lightning)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1805">[ date ]</a>
              <a href="thread.html#1805">[ thread ]</a>
              <a href="subject.html#1805">[ subject ]</a>
              <a href="author.html#1805">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.linuxfoundation.org/mailman/listinfo/lightning-dev">More information about the Lightning-dev
mailing list</a><br>
</body></html>
